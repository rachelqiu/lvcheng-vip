webpackJsonp([21],{0:function(p,m,k){k(762);k(333);k(292);k(332);k(800);k(802);k(801);k(804);k(807);k(799);k(806);k(808);k(803);k(805);k(810);k(756);k(757);k(688);k(789);k(812);k(813);k(814);k(758);k(764);k(763)},113:function(p,m,k){p.exports={globalGrid:22,globalUiPadding:33,animationDurationInMs:500}},292:function(p,m,k){YUI.add("datatype-date-format",function(b,d){var a=function(c,a,f){"undefined"===typeof f&&(f=10);for(a+="";parseInt(c,10)<f&&1<f;f/=10)c=a+c;return c.toString()},f={formats:{a:function(c,
a){return a.a[c.getDay()]},A:function(c,a){return a.A[c.getDay()]},b:function(c,a){return a.b[c.getMonth()]},B:function(c,a){return a.B[c.getMonth()]},C:function(c){return a(parseInt(c.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(c){return a(parseInt(f.formats.G(c)%100,10),0)},G:function(c){var a=c.getFullYear(),b=parseInt(f.formats.V(c),10);c=parseInt(f.formats.W(c),10);c>b?a++:0===c&&52<=b&&a--;return a},H:["getHours","0"],I:function(c){c=c.getHours()%12;return a(0===
c?12:c,0)},j:function(c){var e=new Date(""+c.getFullYear()+"/1/1 GMT");c=new Date(""+c.getFullYear()+"/"+(c.getMonth()+1)+"/"+c.getDate()+" GMT")-e;c=parseInt(c/6E4/60/24,10)+1;return a(c,0,100)},k:["getHours"," "],l:function(c){c=c.getHours()%12;return a(0===c?12:c," ")},m:function(c){return a(c.getMonth()+1,0)},M:["getMinutes","0"],p:function(c,a){return a.p[12<=c.getHours()?1:0]},P:function(c,a){return a.P[12<=c.getHours()?1:0]},s:function(c,a){return parseInt(c.getTime()/1E3,10)},S:["getSeconds",
"0"],u:function(c){c=c.getDay();return 0===c?7:c},U:function(c){var e=parseInt(f.formats.j(c),10);c=6-c.getDay();e=parseInt((e+c)/7,10);return a(e,0)},V:function(c){var e=parseInt(f.formats.W(c),10),b=(new Date(""+c.getFullYear()+"/1/1")).getDay(),e=e+(4<b||1>=b?0:1);53===e&&4>(new Date(""+c.getFullYear()+"/12/31")).getDay()?e=1:0===e&&(e=f.formats.V(new Date(""+(c.getFullYear()-1)+"/12/31")));return a(e,0)},w:"getDay",W:function(c){var e=parseInt(f.formats.j(c),10);c=7-f.formats.u(c);e=parseInt((e+
c)/7,10);return a(e,0,10)},y:function(c){return a(c.getFullYear()%100,0)},Y:"getFullYear",z:function(c){c=c.getTimezoneOffset();var e=a(parseInt(Math.abs(c/60),10),0),f=a(Math.abs(c%60),0);return(0<c?"-":"+")+e+f},Z:function(c){var a=c.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");4<a.length&&(a=f.formats.z(c));return a},"%":function(c){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",
x:"locale",X:"locale"},format:function(c,e){e=e||{};if(!b.Lang.isDate(c))return b.Lang.isValue(c)?c:"";var g,h;g=e.format||"%Y-%m-%d";h=b.Intl.get("datatype-date-format");for(var d=function(c,a){var e=f.aggregates[a];return"locale"===e?h[a]:e},l=function(e,g){var d=f.formats[g];switch(b.Lang.type(d)){case "string":return c[d]();case "function":return d.call(c,c,h);case "array":if("string"===b.Lang.type(d[0]))return a(c[d[0]](),d[1]);default:return g}};g.match(/%[cDFhnrRtTxX]/);)g=g.replace(/%([cDFhnrRtTxX])/g,
d);g=g.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,l);d=l=void 0;return g}};b.mix(b.namespace("Date"),f);b.namespace("DataType");b.DataType.Date=b.Date},"3.17.2",{lang:"ar ar-JO ca ca-ES da da-DK de de-AT de-DE el el-GR en en-AU en-CA en-GB en-IE en-IN en-JO en-MY en-NZ en-PH en-SG en-US es es-AR es-BO es-CL es-CO es-EC es-ES es-MX es-PE es-PY es-US es-UY es-VE fi fi-FI fr fr-BE fr-CA fr-FR hi hi-IN hu id id-ID it it-IT ja ja-JP ko ko-KR ms ms-MY nb nb-NO nl nl-BE nl-NL pl pl-PL pt pt-BR ro ro-RO ru ru-RU sv sv-SE th th-TH tr tr-TR vi vi-VN zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-Hant-TW".split(" ")})},
332:function(p,m,k){YUI.add("datatype-date-math",function(b,d){var a=b.Lang;b.mix(b.namespace("Date"),{isValidDate:function(f){return a.isDate(f)&&isFinite(f)&&"Invalid Date"!=f&&!isNaN(f)&&null!=f?!0:!1},areEqual:function(a,c){return this.isValidDate(a)&&this.isValidDate(c)&&a.getTime()==c.getTime()},isGreater:function(a,c){return this.isValidDate(a)&&this.isValidDate(c)&&a.getTime()>c.getTime()},isGreaterOrEqual:function(a,c){return this.isValidDate(a)&&this.isValidDate(c)&&a.getTime()>=c.getTime()},
isInRange:function(a,c,e){return this.isGreaterOrEqual(a,c)&&this.isGreaterOrEqual(e,a)},addDays:function(a,c){return new Date(a.getTime()+864E5*c)},addMonths:function(a,c){var e=a.getFullYear(),b=a.getMonth()+c,e=Math.floor(e+b/12),b=(b%12+12)%12,h=new Date(a.getTime());h.setFullYear(e);h.setMonth(b);return h},addYears:function(a,c){var e=a.getFullYear()+c,b=new Date(a.getTime());b.setFullYear(e);return b},listOfDatesInMonth:function(a){if(!this.isValidDate(a))return[];var c=this.daysInMonth(a),
e=a.getFullYear();a=a.getMonth();for(var b=[],h=1;h<=c;h++)b.push(new Date(e,a,h,12,0,0));return b},daysInMonth:function(a){if(!this.isValidDate(a))return 0;var c=a.getMonth(),e=[31,28,31,30,31,30,31,31,30,31,30,31];if(1!=c)return e[c];a=a.getFullYear();return 0===a%400?29:0===a%100?28:0===a%4?29:28}});b.namespace("DataType");b.DataType.Date=b.Date},"3.17.2",{requires:["yui-base"]})},333:function(p,m,k){YUI.add("datatype-date-parse",function(b,d){b.mix(b.namespace("Date"),{parse:function(a){a=new Date(+a||
a);return b.Lang.isDate(a)?a:null}});b.namespace("Parsers").date=b.Date.parse;b.namespace("DataType");b.DataType.Date=b.Date},"3.17.2")},688:function(p,m,k){YUI.add("squarespace-flyout-error-message-template",function(b){var d=b.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["flyout-error-message.html"]=a(function(a,c,e,b,h){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);h=h||{};a='<div class="sqs-flyout-error-message">';(e=e.message)?e=e.call(c,{hash:{},data:h}):
(e=c.message,e="function"===typeof e?e.apply(c):e);if(e||0===e)a+=e;return a+"</div>"})})();b.Handlebars.registerPartial("flyout-error-message.html".replace("/","."),d.templates["flyout-error-message.html"])},"1.0",{requires:["handlebars-base"]})},756:function(p,m,k){YUI.add("squarespace-dialog-field-2",function(b){b.namespace("Squarespace.Widgets").DialogField2=b.namespace("Squarespace").DialogField2=b.Base.create("dialogField",b.Squarespace.Widgets.DataWidget,[b.Squarespace.DialogFieldLegacyInterface,
b.WidgetParent,b.WidgetChild],{initializer:function(b){this._saveInitialData(b?b.data:null);this.publish("error-shown",{broadcast:2});this.publish("edited")},destructor:function(){this._destroyError();this.unplug(b.Plugin.WidgetAnim);this._initialData=void 0;this._errorFlyoutSub&&this._errorFlyoutSub.detach()},_destroyError:function(){this._errorNode&&(this._errorNode.remove(!0),this._errorNode=null)},_saveInitialData:function(d){d=!b.Lang.isValue(d)?this.get("data"):d;b.Lang.isArray(d)&&this.get("cloneInitialData")?
this._initialData=d.slice():b.Lang.isObject(d)&&this.get("cloneInitialData")?this._initialData=b.clone(d,!0):this._initialData=d},setCurrentDataAsInitial:function(){this._saveInitialData()},renderUI:function(){b.Squarespace.DialogField2.superclass.renderUI.call(this);var d=this.get("name");d&&this.get("boundingBox").addClass("name-"+d)},scrollIntoView:function(){this.get("contentBox").scrollIntoView()},showError:function(d){if(d&&this.get("rendered")){var a=this.get("boundingBox"),f=this.get("contentBox"),
c=this.get("errorFlyoutAnchor")||f,f=this.get("errorFlyoutAnimationTime");c.hasPlugin("flyoutPlugin")||c.plug(b.Squarespace.Animations.Flyout,{duration:f,renderTarget:this.get("errorFlyoutRenderTarget")});var e=c.flyoutPlugin,g=b.bind(function(){a.addClass("error");this._destroyError();this._errorNode=b.Node.create('<div class="sqs-flyout-error-message">'+d+"</div>");var f=this.get("dialog");f&&this._errorNode.setStyle("zIndex",f.zIndex+10);this._errorNode.on(this.get("id")+"|click",function(c){c.halt();
this.hideError()},this);var g=b.one(window).get("region"),l=b.Squarespace.NodeUtils.measureNode(this._errorNode).width,f=c.get("region");f.right+l<=g.right?(g="rt",this._errorNode.addClass("out-from-right")):f.left-l>g.left?(g="lt",this._errorNode.addClass("out-from-left")):(g="bl",this._errorNode.addClass("out-from-bottom"),this._errorNode.setStyle("width",f.width));e.setAttrs({node:this._errorNode,alignment:g});this._clearErrorSub=b.on(this.get("id")+"|click",this.hideError,this);f=this.get("id");
e.once(f+"|shown",function(c){this.fire("error-shown",{message:d})},this);this._errorFlyoutSub=c.once("flyout-shown",function(c){this._errorNode.setStyle("width","100%")},this);e.show()},this);e.get("visible")?(this._isHiding=!0,this._showErrorSub&&this._showErrorSub.detach(),this._showErrorSub=e.once(this.get("id")+"|hidden",function(){this._showErrorSub=null;this._isHiding=!1;g()},this),e.hide()):g()}},hideError:function(){if(this.get("rendered")&&!this._isHiding){var b=this.get("boundingBox"),
a=this.get("contentBox"),a=this.get("errorFlyoutAnchor")||a;a.hasPlugin("flyoutPlugin")&&a.flyoutPlugin.get("visible")&&(this._clearErrorSub&&(this._clearErrorSub.detach(),this._clearErrorSub=null),a=a.flyoutPlugin,a.once(this.get("id")+"|hidden",function(a){b.removeClass("error");this.fire("error-hidden");this._destroyError()},this),a.hide())}},didDataChange:function(){var d=this.get("data");if(this.get("readOnly"))return!1;if(b.Lang.isArray(this._initialData))return b.JSON.stringify(this._initialData)!==
b.JSON.stringify(d);if(b.Lang.isObject(this._initialData))throw Error("DialogField base class will not compare objects. Define didDataChange for this field.");return this._initialData!==d},isEmpty:function(){var b=this.get("data");return""===b||0===b},revert:function(){this.set("data",this._initialData,{revert:!0})},_getErrors:function(){return[]},isValid:function(){return!b.Lang.isArray(this.get("errors"))||0===this.get("errors").length}},{CSS_PREFIX:"sqs-dialog-field",ATTRS:{cloneInitialData:{value:!0},
strings:{},name:{value:null,validator:b.Squarespace.AttrValidators.isNullOrString},dialog:{value:null,validator:function(d){if(b.Lang.isNull(d)||d instanceof b.Squarespace.EditingDialog||d.constructor instanceof b.Squarespace.EditingDialog.constructor)return!0;console.warn(this.name+": Not an EditingDialog");return!1}},readOnly:{value:!1,validator:b.Squarespace.AttrValidators.isBoolean},required:{value:!1,validator:b.Squarespace.AttrValidators.isBoolean},errors:{value:[],readOnly:!0,getter:"_getErrors",
validator:b.Squarespace.AttrValidators.isArray},errorFlyoutAnchor:{value:null,readOnly:!0,validator:b.Squarespace.AttrValidators.isNullOrInstanceOf(b.Node)},errorFlyoutRenderTarget:{value:void 0},errorFlyoutAnimationTime:{value:0.3},focusable:{value:!0,validator:b.Lang.isBoolean}}})},"1.0",{requires:"base json-stringify squarespace-animations squarespace-attr-validators squarespace-dialog-field-legacy-interface squarespace-flyout-error-message-template squarespace-node-flyout squarespace-node-utils squarespace-widgets-data-widget widget-anim widget-child widget-parent".split(" ")})},
757:function(p,m,k){YUI.add("squarespace-dialog-field-legacy-interface",function(b){var d=b.namespace("Squarespace").DialogFieldLegacyInterface=function(a){this.inActiveFrame=!0;b.Lang.isFunction(this.hideError)&&b.Do.after(function(){var b=a.dialog;b&&b.clearError(this)},this,"hideError",this);b.Do.after(function(){this.after(this.get("id")+"|dataChange",function(b){var c=a.dialog;c&&!b.silent&&c.fire("datachange",this);(c=this.get("name"))&&this.fire("value-changed",{name:c,value:b.newVal,oldValue:b.prevVal,
field:this})},this)},this,"bindUI",this);b.Do.after(function(){a&&a.defaultHidden&&this.hide(!0)},this,"syncUI",this)};d.NAME="dialogFieldLegacyInterface";d.prototype={temporaryHide:function(){this.hide()},temporaryShow:function(){this.show()},getName:function(){return this.get("name")},getType:function(){return this.name},getValue:function(){return this.get("data")},getErrors:function(){return this.get("errors")},getNode:function(){return this.get("boundingBox")},setValue:function(a){this.set("data",
a)},clearError:function(){this.hideError()}}},"1.0")},758:function(p,m,k){YUI.add("squarespace-dialog-fields",function(b){b.namespace("Squarespace");b.Squarespace.DialogField=Class.extend(b.Squarespace.Gizmo,{_name:"DialogField",initialize:function(d,a,f){this._super();this.config=b.merge({defaultHidden:!1},d);this.dialog=this.panel=f;this.initialData=b.merge({},a);this.className="";this.inActiveFrame=!0;this.config&&("undefined"!==typeof this.config.name&&this.config.name in a)&&(this.value=a[this.config.name])},
hide:function(b){this.temporaryHide(b)},getTakenHeight:function(){return this.html.get("offsetHeight")},show:function(b){this.temporaryShow(b)},getName:function(){return this.config.name},getType:function(){return this.type},getDialog:function(){return this.dialog},append:function(b){b.append(this.html);this.config.defaultHidden&&this.temporaryHide(!1)},resize:function(){},isValid:function(){return 0<this.getErrors().length},getErrors:function(){return this.config.validator&&this.config.validationErrorMsg&&
!this.config.validator.call(this,this.dialog)?[this.config.validationErrorMsg]:[]},showError:function(d){if(d){var a=this.errorFlyoutAnchor||this.control;a||console.error("dialog-field: [DialogField] No control or error flyout anchor set to throw form field error on. Set this.control or this.errorFlyoutAnchor to a node.");a.hasPlugin("flyoutPlugin")||a.plug(b.Squarespace.Animations.Flyout,{duration:0.3});a=a.flyoutPlugin;a.get("visible")?(this._showErrorSub&&this._showErrorSub.detach(),this._showErrorSub=
a.once(this.getId()+"|hidden",function(){this._showErrorSub=null;this._doShowErrorFlyout(d)},this),a.hide()):this._doShowErrorFlyout(d)}},_doShowErrorFlyout:function(d){var a=this.errorFlyoutAnchor||this.control,f=a.flyoutPlugin;this.html.addClass("error");this._errorEl||(this._errorEl=b.Node.create('<div class="flyout-error-message">'+d+"</div>"),this._errorEl.setStyle("zIndex",this.dialog.zIndex+10),this._errorEl.on(this.getId()+"|click",function(c){c.halt()},this));this._errorEl.setContent(d);
d=b.Squarespace.NodeUtils.measureNode(this._errorEl).width;a=a.getX()+a.get("offsetWidth")-(this.html.hasClass("thin")?-10:1)+d;d=b.one(window).get("region").right;(a=a>d)&&this._errorEl.addClass("out-from-left");f.setAttrs({node:this._errorEl,alignment:a?"lt":"rt"});this._clearErrorSub=b.on(this.getId()+"|click",this.clearError,this.errorEl,this);f.show()},hideError:function(){var b=this.errorFlyoutAnchor||this.control;b&&(b.hasPlugin("flyoutPlugin")&&b.flyoutPlugin.get("visible"))&&(this._clearErrorSub&&
this._clearErrorSub.detach(),b=b.flyoutPlugin,this._subscribeOnce(b,this.getId()+"|hidden",function(a){this.html.removeClass("error")},this),b.hide())},clearError:function(){this.dialog.clearError(this);this.hideError()},scrollIntoView:function(){this.html.scrollIntoView()},updateInlineTitle:function(){},setHeight:function(b){this.control&&this.control.setStyle("height",b+"px")},getValue:function(){return this.value},setValue:function(b){var a=this.value;this.value=b;"config"in this&&"name"in this.config&&
this.fire("value-changed",{name:this.config.name,value:b,oldValue:a,field:this})},temporaryHide:function(d){this.fire("hide",this);this.hidden=!0;this.hideAnim&&this.hideAnim.stop();d?(this.html.setStyle("display","none"),this.fire("hidden",this)):(this.hideAnim=this._anim({node:this.html,to:{opacity:0},duration:0.35,easing:b.Easing.easeOutStrong}),this.hideAnim.on("end",function(){this.html.setStyle("display","none");this.fire("hidden",this)},this),this.hideAnim.run())},temporaryShow:function(){this.fire("show",
this);this.hidden=!1;this.hideAnim&&this.hideAnim.stop();this.html.setStyle("display","block");this.hideAnim=this._anim({node:this.html,to:{opacity:1},duration:0.35,easing:b.Easing.easeOutStrong});this.hideAnim.on("end",function(){b.fire("shown",this);b.fire("showing",this);this.fire("shown")},this);this.hideAnim.run()},getNode:function(){return this.html},didDataChange:function(){return this.config.ignoreChanges?!1:!this.initialData||b.Lang.isUndefined(this.initialData[this.getName()])&&""===this.getValue()?
!1:b.Lang.isArray(this.initialData[this.getName()])?b.JSON.stringify(this.initialData[this.getName()])!==b.JSON.stringify(this.getValue()):this.getValue()!==this.initialData[this.getName()]}})},"1.0",{requires:"anim json squarespace-gizmo squarespace-node-flyout squarespace-node-utils squarespace-util widget".split(" ")})},762:function(p,m,k){var b=k(113);YUI.add("squarespace-dialog",function(d){d.namespace("Squarespace");d.Squarespace.OPEN_DIALOGS=[];d.Squarespace.DialogStates={CLOSED:1,EDITING:2,
LOADING:3,CLOSING:4,SAVING:5,MOVING:6};d.Squarespace.EditingDialog=Class.extend(d.Squarespace.ZombieGizmo,{_name:"EditingDialog",_events:{show:{},shown:{},aftershowanim:{},"align-to-anchor":{},"aligned-to-anchor":{},loading:{},"cancel-loading":{},"loading-ready":{},ready:{},drag:{},hide:{},hidden:{},close:{},closed:{},canceled:{},"cancel-clicked":{},"overlay-click":{},"render-anchor":{},datachange:{},datachanged:{},"send-requested":{emitFacade:!0},"remove-requested":{},"data-saved":{},"auto-save":{},
"auto-save-requested":{emitFacade:!0},"allow-editing":{},"editing-allowed":{},"show-errors":{},"local-errors":{}},initialize:function(a){this._super(a);this.setParams(a);this._setState("CLOSED");this.bodyEvents=[];this.buttonEvents=[];this.globalEvents=[];this.childDialogs=[];this.verticalFields=[];this.timers=[];this.fields={};this.sections={};this._noNameFields=[];this._setEdited(!1);this.NOTCH_WIDTH=20;this.BUTTONS_BASE_IDX=100;this.NOTCH_HEIGHT=11;this.lastTabIndex=1;this.on("datachange",this.onDataChange,
this);this._debug=new d.Squarespace.Debugger({name:"EditingDialog",output:!1});this.publish("show",{prefix:"EditingDialog",broadcast:2,emitFacade:!0});this.publish("dismiss",{prefix:"EditingDialog",broadcast:2,emitFacade:!0});this.publish("tab-shown",{prefix:"EditingDialog",broadcast:2,emitFacade:!0});this.publish("button-click",{prefix:"EditingDialog",broadcast:2,emitFacade:!0,preventable:!1})},defaultOpts:{tabs:[],initialData:{},buttons:[],style:"standard",colorScheme:"light",buttonAlign:"right",
position:"center",verticalHeight:"fixed",flyoutPointerDirection:"left",closingText:"Canceled...",savingText:"Saving...",top:60,closeOthers:!0,disableTips:!0,closeable:!0,autoFocus:!0,discardChangesConfirmation:!0,overlay:!1,validateActiveTabOnly:!1,edgeMargin:11,initialDataByReference:!1,frameless:!1},getName:function(){return this.params.name},getInitialData:function(){return this.params.initialData},setParams:function(a){if(a){this.params=d.merge(this.defaultOpts,a);this.params.primaryTabs&&(this.params.tabs=
this.params.tabs.concat(this.params.primaryTabs),delete this.params.primaryTabs);this.params.secondaryTabs&&(this.params.tabs=this.params.tabs.concat(this.params.secondaryTabs),delete this.params.secondaryTabs);if((!this.params.tabs||0===this.params.tabs.length)&&this.params.fields)this.params.tabs=[{fields:this.params.fields}];this.params.tabs[0].tabTitle||(this.params.tabs[0].tabTitle="Item");this.params.tabs[0].name||(this.params.tabs[0].name="item");"transparent"===this.params.style&&(this.params.disableSaveOverlay=
!0);!a.discardChangesConfirmation&&0===this.params.buttons.length&&(this.params.discardChangesConfirmation=!1);this.definitionChanged=!0}},show:function(a){this.fire("show");this._debug.log("Showing",["showParams",a],["this.params",this.params]);this.moving&&(this._setState("EDITING"),this.animation&&this.animation.stop(),this.fire("cancel-loading"));if(!this.destroyTimer&&!this._isState("LOADING")&&!this._isState("CLOSING"))if(d.Squarespace.ToolTipManager&&this.params.disableTips&&d.Squarespace.ToolTipManager.disableTooltips(),
this.anchorEl&&this.anchorEl.removeClass("targeted"),a&&this._setShowParams(a),this.params.parentDialog&&this.params.parentDialog.addChildDialog(this),this._isState("CLOSED")){this.definitionChanged=!1;if(this.params.closeOthers){a=0;for(var b=d.Squarespace.OPEN_DIALOGS.length;a<b;++a)d.Squarespace.OPEN_DIALOGS[a].cancel()}d.Squarespace.OPEN_DIALOGS.push(this);d.one(document.body).addClass("dialog-open");this.fire("loading");this._setState("LOADING");this.timers.push(d.later(100,this,function(){this.params.closeable&&
d.Squarespace.EscManager.addTarget(this);this.globalEvents.push(d.on("resize",this.onResize,d.one(window),this))}));d.one(document).get("winWidth");d.one(document).get("winHeight");this._addTitleEl();this._addBodyEl();this.mainEl=d.Node.create('<div class="main-container"></div>').append(this.titleEl).append(this.bodyEl).append(this.controlsEl);a="";this.params.frameless?a+="frameless-dialog-wrapper ":this.params.disableStandardDialogWrapperClass||(a+="standard-dialog-wrapper ");a+="squarespace-managed-ui "+
this.params.style+" "+this.params.colorScheme+" buttons-"+this.params.buttonAlign;this.params.name&&(a+=" dialog-"+d.Squarespace.Utils.slugify(this.params.name));this.el=d.Node.create('<div class="'+a+'"></div>').append(this.mainEl);this.bodyEvents.push(this.el.on("click",function(c){c.target.ancestor(".sqs-button",!0)||(this.cancelChildDialogs(),this.fire("click",c))},this));this.params.zIndex?this.zIndex=this.params.zIndex:(d.Squarespace.DIALOG_ZINDEX_BASE+=10,this.zIndex=d.Squarespace.DIALOG_ZINDEX_BASE);
this.el.setStyle("zIndex",this.zIndex);this.params.draggable&&this.enableDragging();this.params.hidable&&this._addHideEl();this.params.headerButton&&this._addHeaderButtonEl();this.buttonHolder=d.Node.create("<div>").addClass("button-holder");this.autosaveEl=d.Node.create("<div>").addClass("autosave-state");this.controlsEl&&(this.controlsEl.append(this.autosaveEl),this.controlsEl.append(this.buttonHolder));a=this.anchorEl?this._positionWithAnchorEl():this._positionWithDefault();this.params.loadingState?
(a=this._anim({node:this.el,to:a[1]?{opacity:0.9,top:a[1]}:{opacity:0.9},duration:0.15,easing:d.Easing.easeOutStrong}),a.on("end",function(){this.fire("loading-ready")},this),a.run()):this.dataReady();if("full"==this.params.verticalHeight||"fit"==this.params.verticalHeight)this.el.setStyles({top:this.params.edgeMargin+"px",bottom:this.params.edgeMargin+"px"}),this.params.top=this.params.edgeMargin;this.params.overlay&&(this.overlayEl=d.Node.create("<div>").addClass("dialog-screen-overlay"),this.overlayEl.setStyle("zIndex",
this.zIndex-1),this.overlayEl.addClass("hidden"),d.one(document.body).append(this.overlayEl),d.soon(function(){this.overlayEl.removeClass("hidden")}.bind(this)),this.globalEvents.push(d.on("click",this.onOverlayClick,this.overlayEl,this)));this.moveIntoView();d.later(300,this,function(){this._shown=!0;this.fire("shown",this)})}else this.anchorEl&&(this.anchorEl.addClass("targeted"),this._setState("LOADING"),this.moving=!0,this.updateTitle(),this.fire("loading"),this._updatePosition(!1),this.position&&
(this.animation=this._anim({node:this.el,to:{left:this.position.getX()+"px",top:this.position.getY()+"px"},duration:0.25,easing:d.Easing.easeOutStrong}),this.animation.on("end",function(){this.fire("loading-ready");this.dataReady()},this),this.animation.run()))},_setShowParams:function(a){a.data&&(this.data=a.data);a.anchor&&(this.anchorEl=a.anchor);a.top&&(this.params.top=a.top);a.flyoutPointerDirection&&(this.params.flyoutPointerDirection=a.flyoutPointerDirection)},_addHeaderButtonEl:function(){var a=
d.Node.create('<div class="header-button"></div>'),b=d.Node.create('<input type="button" value="'+this.params.headerButton.title+'" />');b.setData("type",this.params.headerButton.type);d.on("click",this.params.headerButton.onclick,b,this);this.el.append(a.append(b))},_addBodyEl:function(){this.bodyEl=d.Node.create('<div class="body-block"></div>');0!==this.params.buttons.length?this.controlsEl=d.Node.create('<div class="controls-block"></div>'):this.bodyEl.addClass("bottom")},_addTitleEl:function(){this.titleEl=
d.Node.create('<div class="title-block loading"></div>');this.titleTextEl=d.Node.create('<div class="text-holder"></div>');this.titleEl.append(this.titleTextEl);this.tabsEl=d.Node.create('<div class="configuration-container-tabs"></div>');d.Lang.isNumber(this.currentTabIndex)||(this.currentTabIndex=0);this.titleEl.append(this.tabsEl);this.updateTitle()},_addHideEl:function(){var a=d.Node.create('<div class="dialog-close"></div>');this.el.prepend(a);a.on("click",function(){this.fire("user-close");
this.close()},this)},_positionWithAnchorEl:function(){var a,b,c,e,g=this.params.width;this.el.setStyle("position",this.params.forcePosition||"absolute");this.anchorEl.addClass("targeted");"left"===this.params.flyoutPointerDirection||"right"===this.params.flyoutPointerDirection?(this.el.setStyle("width",g+this.NOTCH_HEIGHT+"px"),this.mainEl.setStyle("width",g+"px"),this.el.addClass("flyout")):"hidden"===this.params.flyoutPointerDirection?(this.el.setStyle("width",g+"px"),this.mainEl.setStyle("width",
g+"px")):"top"===this.params.flyoutPointerDirection?(this._initNotchEl("top"),this.el.insertBefore(this.notchEl,this.mainEl),c=this.anchorEl.get("offsetWidth"),b=this.anchorEl.get("offsetHeight"),a=this.anchorEl.getX(),b=this.anchorEl.getY()+b,g>c&&(a-=(g-c)/2),this.currentXY=[a,b-3],this.notchEl.setStyle("marginLeft",(g-30)/2+"px"),c=this.params.left||this.currentXY[0],e=this.params.top||this.currentXY[1],this.el.setStyles({left:c+"px",top:e+"px",width:g+"px"}),this.mainEl.setStyle("width",g+"px")):
"bottom"===this.params.flyoutPointerDirection?(this._initNotchEl("top","bottom"),this.el.append(this.notchEl),c=this.anchorEl.get("offsetWidth"),b=this.anchorEl.get("offsetHeight"),a=this.anchorEl.getX(),b=this.anchorEl.getY()+b,g>c&&(a-=(g-c)/2),this.currentXY=[a,b-3],this.notchEl.setStyle("marginLeft",(g-30)/2+"px"),c=this.params.left||this.currentXY[0],e=this.params.top||this.currentXY[1],this.el.setStyles({left:c+"px",top:e+"px",width:g+"px"}),this.mainEl.setStyle("width",g+"px")):(this.currentXY=
[this.anchorEl.getX()+(this.anchorEl.get("offsetWidth")-g)/2,this.anchorEl.getY()+(this.anchorEl.get("offsetHeight")-this.params.height)/2-15],this.el.setStyles({left:this.currentXY[0]+"px",top:this.currentXY[1]+"px",width:g+"px"}),this.el.setStyle(),this.mainEl.setStyle("width",g+"px"),b=this.currentXY[1]);d.one(d.config.doc.body).append(this.el);return[a,b]},_positionWithDefault:function(){var a,b=d.one(document).get("winWidth");d.one(document).get("winHeight");this.el.setStyle("position","fixed");
"right"===this.params.position?(this.el.setStyles({right:this.params.edgeMargin+"px",top:"0px"}),0===this.params.edgeMargin&&(this.titleEl.setStyle("border-radius","0px"),this.controlsEl.setStyle("border-radius","0px"))):"undefined"!==typeof this.params.left?this.currentXY=[this.params.left,this.params.top]:(this.currentXY=[(b-this.params.width)/2,this.params.top],this.el.setStyle("position","fixed"));this.currentXY&&(this.el.setStyles({left:this.currentXY[0]+"px",top:this.currentXY[1]+"px"}),a=this.currentXY[1]);
this.el.setStyle("width",this.params.width+"px");this.mainEl.setStyle("width",this.params.width+"px");d.one(document.body).append(this.el);return[void 0,a]},isOpen:function(){return this._isState("LOADING")||this._isState("EDITING")},disableBodyScroll:function(){this.oldBodyScroll=d.one("body").getStyle("overflow");d.one("body").setStyle("overflow","hidden")},restoreBodyScroll:function(){this.hasOwnProperty("oldBodyScroll")&&(this.oldBodyScroll?d.one("body").setStyle("overflow",this.oldBodyScroll):
d.one("body").setStyle("overflow",null))},getAnchorEl:function(){return this.anchorEl},getChildDialogs:function(){return this.childDialogs},addChildDialog:function(a){0>this.childDialogs.indexOf(a)&&(this.cancelChildDialogs(),this._debug.log("addChildDialog",a),this.childDialogs.push(a));a.params.parentDialog=this},removeChildDialog:function(a){this.childDialogs=d.Array.filter(this.childDialogs,function(b){return b!==a},this)},enableDragging:function(){this.titleEl.setStyle("cursor","move");this.dd=
new d.DD.Drag({node:this.el});this.dd.on("drag:mouseDown",function(a){d.Squarespace.Help&&d.Squarespace.Help.active&&a.halt();a.ev.target.ancestor(".body-block",!0)&&a.halt()},this);this.dd.on("drag:start",this.cancelChildDialogs,this);this.dd.on("drag:drag",function(a){this.fire("drag",a)},this);this.dd.on("drag:end",function(a){this.moveIntoView()},this)},temporaryHide:function(a){this.fire("hide");d.Array.each(this.childDialogs,function(a){a.temporaryHide()},this);this.hideAnim&&this.hideAnim.stop();
this._hideAnimEvent&&this._hideAnimEvent.detach();this.overlayHideAnim&&this.overlayHideAnim.stop();this._overlayHideAnimEvent&&this._overlayHideAnimEvent.detach();this.hideAnim=this._anim({node:this.el,to:{opacity:0},duration:0.35,easing:d.Easing.easeOutStrong});this.overlayEl&&(this.overlayHideAnim=this._anim({node:this.overlayEl,to:{opacity:0},duration:0.35,easing:d.Easing.easeOutStrong}),this._overlayHideAnimEvent=this._subscribe(this.overlayHideAnim,"end",function(){this.overlayEl.setStyle("display",
"none")}));this._hideAnimEvent=this._subscribe(this.hideAnim,"end",function(){this.el.setStyle("display","none");this.fire("hidden",this)});a?(this.el.setStyle("display","none"),this.overlayEl&&this.overlayEl.setStyle("display","none"),this.fire("hidden",this)):(this.hideAnim.run(),this.overlayEl&&this.overlayHideAnim.run())},temporaryShow:function(a){this.fire("show",this);a&&this._setShowParams(a);this.hideAnim&&this.hideAnim.stop();this._hideAnimEvent&&this._hideAnimEvent.detach();this.overlayHideAnim&&
this.overlayHideAnim.stop();this.overlayEl&&(this.overlayEl.setStyle("display","block"),this.overlayHideAnim=this._anim({node:this.overlayEl,to:{opacity:this.params.overlay},duration:0.35,easing:d.Easing.easeOutStrong}),this.overlayHideAnim.run());this.el.setStyle("display","block");this.hideAnim=this._anim({node:this.el,to:{opacity:1},duration:0.35,easing:d.Easing.easeOutStrong});this._hideAnimEvent=this._subscribeOnce(this.hideAnim,"end",function(){this.fire("shown",this)});this.hideAnim.run();
this._showChildren();this.moveIntoView()},_applyMethodToChildren:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d.Array.each(this.childDialogs,function(c){c[a].apply(c,b)},this)},_showChildren:function(){this._applyMethodToChildren("temporaryShow")},_hideChildren:function(){this._applyMethodToChildren("temporaryHide")},cancelChildDialogs:function(){this._applyMethodToChildren("cancel");this.childDialogs=[]},isVisible:function(){return!this._isState("CLOSED")},_updatePosition:function(a){if(this.el&&
this.anchorEl){var b=this.el.get("offsetHeight"),c=this.params.flyoutPointerDirection;if(!("top"===c||"bottom"===c)){if("centered"===c){var e=this.anchorEl.getXY();this.position=new d.Squarespace.Position({x:e[0]+(this.anchorEl.get("offsetWidth")-this.params.width)/2,y:e[1]+(this.anchorEl.get("offsetHeight")-b)/2,w:this.params.width,h:b});this.position.nudgeFix()}else this.position=new d.Squarespace.Position({avoidElX:this.anchorEl,avoidElY:this.anchorEl,xdir:"right",ydir:"bottom",x:this.anchorEl.getX(),
y:this.anchorEl.getY(),xo:2,yo:0,w:this.params.width+this.NOTCH_HEIGHT,h:b}),this.position.reflectFix();"hidden"!==c&&"centered"!==c&&this._reattachNotchEl();a&&(this.el.setXY(this.position.getXY()),this._alignNotch(this.anchorEl))}}},_reattachNotchEl:function(){var a="right"===this.position.xdir?"left":"right";this.notchEl?(this.notchEl.set("className","flyout-notch-"+a),this.notchEl.inDoc()&&this.notchEl.remove()):this._initNotchEl(a);"right"===this.position.xdir?this.el.insertBefore(this.notchEl,
this.mainEl):this.el.append(this.notchEl)},_initNotchEl:function(a,b){this.notchEl=d.Node.create('<div class="flyout-notch-'+a+'">&nbsp;</div>');d.Lang.isString(b)&&this.notchEl.addClass(b)},_alignNotch:function(a){if(this.notchEl){var b=this.el.get("offsetHeight"),b=Math.max(b-36,220),c=12,e=this.el.get("region");a=a.get("region");var g=a.top+a.height/2;a.top>e.top&&(c=g-e.top-11,c=Math.min(b,Math.max(12,c)));this.notchEl.setStyle("marginTop",c+"px")}},onDataChange:function(a){this.fire("render-anchor",
this.getData());this.setEdited();this._debug.log("onDataChange");this.fire("datachanged")},onOverlayClick:function(a){a.halt();this.fire("overlay-click");this.params.disableOverlayCancel||this.close()},setEdited:function(){this._isState("SAVING")||(this.params.discardChangesConfirmation&&!this._onBeforeUnloadEvt&&(this._onBeforeUnloadEvt=d.on("beforeunload",function(a){this.isVisible()&&(a.returnValue="You have unsaved changes.")},this)),this._setEdited(!0))},clearEdited:function(){this._onBeforeUnloadEvt&&
this._onBeforeUnloadEvt.detach();this._setEdited(!1)},_setEdited:function(a){this.edited=!!a;this.editedSinceLastSave=!!a},getEditedSinceLastSave:function(){return this.editedSinceLastSave},getNextTabIndex:function(){return this.lastTabIndex++},getEdited:function(){return this.edited},isState:function(a){return this.getState()===a},getState:function(){return this.state},setInitialData:function(a){this.params.initialData=this.params.initialDataByReference?a:d.clone(a,!0);this.fields&&d.Object.each(this.fields,
function(a,c){this._isDialogField2(a)&&(a.get("name")&&!d.Lang.isUndefined(this.params.initialData[a.get("name")]))&&(a.set("data",this.params.initialData[a.get("name")],{source:"setInitialData"}),a.setCurrentDataAsInitial())},this)},getBodyHeight:function(){return this.params.height?this.params.height:this._getFullHeight()},setActiveFlyout:function(a){this.activeFlyout&&this.activeFlyout.field.closeFlyout();d.later(10,this,function(){this.activeFlyout=a})},clearActiveFlyout:function(){this.activeFlyout=
null},onResize:function(){var a=d.one(document).get("winWidth");d.one(document).get("winHeight");if(!this.anchorEl&&!this.params.draggable){var b={};if("full"==this.params.verticalHeight||"fit"==this.params.verticalHeight)this.bodyHeight=this.getBodyHeight(),"fit"==this.params.verticalHeight&&this.bodyHeight>this.observedHeight&&(this.bodyHeight=this.observedHeight),this.bodyEl.setStyle("height",this.bodyHeight+"px"),this.bodyEl.all(".scrollable-body").each(function(c){c.setStyles({height:this.bodyHeight-
30+"px",paddingBottom:"30px"})},this),this.resizeVerticalFields();"right"!==this.params.position&&(this.hideErrors(),b.left=(a-this.params.width)/2,b.top=this.params.top,this.params.left&&(b.left=this.params.left));this.currentXY=[b.left,b.top];this.moveAnim&&this.moveAnim.stop();this.moveAnim=this._anim({node:this.el,to:b,duration:0.15,easing:d.Easing.easeOutStrong});this.moveAnim.run()}this.moveIntoView()},moveIntoView:function(a){if(this.params.draggable){a&&(!this.anchorEl&&!this.position)&&(a=
!1);var b={},c=this.el.get("docScrollX"),e=this.el.get("docScrollY"),g=this.el.get("winWidth")+c,h=this.el.get("winHeight"),q=h+e,l=this.el.getY(),n=this.el.getX();l<e&&(b.top=e);l+this.el.get("offsetHeight")>q&&(b.top=q-this.el.get("offsetHeight"));n+this.el.get("offsetWidth")>g&&(b.left=g-this.el.get("offsetWidth"));n<c&&(b.left=c);a&&(b.top=b.top?Math.max(b.top,this.position.getY()):this.position.getY());"fixed"===this.params.forcePosition&&(d.Lang.isValue(b.top)&&b.top>this.el.get("winHeight"))&&
(b.top=Math.max(0,h-this.el.get("offsetHeight")));0!==d.Object.size(b)&&this._anim({node:this.el,to:b,duration:0.3,easing:d.Easing.easeOutStrong}).run();this.preferredHeight+120>h?(this.bodyHeight=h-120,this.bodyEl.setHeight(this.bodyHeight)):this.bodyHeight!=this.preferredHeight&&(this.bodyHeight=this.preferredHeight,this.bodyEl.setHeight(this.preferredHeight))}},scrollIntoView:function(a){this.el.scrollIntoView(a)},showErrors:function(a){this.fire("show-errors",a);this.allowEditing();this.currentErrors=
a;this.errorCount=d.Object.size(a);this.errorsByTab={};d.Object.each(a,function(a,c){var e=this.getField(c);e?(e.tab.tabNavigationObj&&e.tab.tabNavigationObj.addClass("error"),this.errorsByTab[e.tab.name]?this.errorsByTab[e.tab.name]++:this.errorsByTab[e.tab.name]=1):console.error("Server error returned for a missing dialog field: "+c)},this);this.activateErrors()},clearError:function(a){this.currentErrors&&this.currentErrors[a.getName()]&&(this.errorsByTab[a.tab.name]--,delete this.currentErrors[a.getName()],
this.errorCount--,a.tab.tabNavigationObj&&0===this.errorsByTab[a.tab.name]&&a.tab.tabNavigationObj.removeClass("error"))},activateErrors:function(){if(this.errorCount){var a=null;d.Array.each(this.currentTab.tabFields,function(b){this.currentErrors[b.getName()]&&(a||(a=b,a.scrollIntoView()),b.showError(this.currentErrors[b.getName()]))},this);a&&d.Lang.isFunction(a.focus)&&a.focus()}},hideErrors:function(){this.currentTab&&d.Array.each(this.currentTab.tabFields||[],function(a){d.Lang.isFunction(a.hideError)&&
a.hideError()},this)},updateTitle:function(a){var b=this.params.tabs[this.currentTabIndex];b&&(this.currentTab&&b.title!=this.currentTab.title)&&(this.currentTab.title=b.title);d.Lang.isUndefined(a)&&(a=this.state);var b=this.currentTab&&this.currentTab.title?this.currentTab.title:this.params.title,c="";this.params.subtext&&(c='<div class="title-subtext">'+this.params.subtext+"</div>");switch(a){case d.Squarespace.DialogStates.LOADING:this.params.loadingText&&this.setTitleHtml('<div class="title-text">'+
this.params.loadingText+"</div>"+c);break;case d.Squarespace.DialogStates.EDITING:b&&this.setTitleHtml('<div class="title-text">'+b+"</div>"+c);break;case d.Squarespace.DialogStates.SAVING:this.params.savingText&&this.setTitleHtml('<div class="title-text">'+this.params.savingText+"</div>"+c)}},setTitleHtml:function(a){this.titleTextEl.setHTML(a)},setData:function(a){d.Array.each(this.currentTab.tabFields,function(b,c){if(b.setValue){var e=a[b.getName()];b.setValue(d.Lang.isValue(e)?e:null);this.fire("datachange",
b)}},this)},focusTab:function(){this.currentTab&&(this.fire("tab-focused",{tabName:this.currentTab.name}),d.Array.some(this.currentTab.tabFields,function(a,b){var c=!(!a.setValue||!a.focus),e=this._isDialogField2(a),g=!(!e||!a.get("focusable"));if(c&&!e||g)return a.focus(),!0},this))},_getFullHeight:function(){return d.one(document).get("winHeight")-2*this.params.edgeMargin-this.controlsHeight-this.titleEl.get("offsetHeight")},dataReady:function(){var a;this.clearEdited();this._setState("EDITING");
this.titleEl.removeClass("loading");this.params.initialData||(this.params.initialData={});this.bodyHeight=this.params.height;this.controlsHeight="standard"===this.params.style?65:60;if("full"===this.params.verticalHeight||"fit"===this.params.verticalHeight)this.bodyHeight=this._getFullHeight();this.preferredHeight=this.bodyHeight;this.bodyEl.setStyle("width",this.params.width+"px");this.params.overlay&&!this.params.doNotDisableBodyScroll&&this.disableBodyScroll();if(this.moving){this.moving=!1;this.updateTitle();
if(this.definitionChanged)this.definitionChanged=!1,this.destroyBody(),this.destroyButtons(),this.render(),a=this._anim({node:this.bodyEl,duration:0.25,easing:d.Easing.easeOutStrong,to:{height:this.bodyHeight}}),a.on("end",function(){this.fire("ready")},this),a.run();else{if(this.rendered)this.setData(this.params.initialData),this.params.autoFocus&&this.focusTab();else this.once("rendered",function(){this.setData(this.params.initialData);this.params.autoFocus&&this.focusTab()},this);this.fire("ready")}this.clearEdited()}else if(this.currentTabIndex=
0,this.currentTab=this.params.tabs[0],this.updateTitle(),this.params.loadingState)a=this._anim({node:this.el,to:{opacity:1},duration:0.15,easing:d.Easing.easeOutStrong}),a.run(),this.controlsEl&&(a=this._anim({node:this.controlsEl,to:{height:this.controlsHeight},duration:0.15,easing:d.Easing.easeOutStrong}),a.run()),a=this._anim({node:this.bodyEl,to:{height:this.bodyHeight},duration:0.25,easing:d.Easing.easeOutStrong}),a.on("end",function(){this.render();this.fire("ready")},this),a.run();else{this.render();
this.currentData=this.params.initialData;var b=this;switch(this.params.showAnim){case "custom":this.params.customShowAnim(this.el,function(){b.fire("ready")});break;case "fade":this.el.transition({opacity:{duration:0.2,value:1},easing:"ease-out"},function(){b.fire("ready");b.el&&b.el.setStyle("transform",null)});break;case "noshow":this.el.setStyles({display:"none"});b.fire("ready");break;default:b.fire("ready"),this.el.addClass("visible")}}},containsNode:function(a){return this.bodyEl&&this.bodyEl.contains(a)},
activateTab:function(a,b){this.hideErrors();var c=b||a.target.getData(),e=parseInt(c.index,10);this.currentTab||(this.currentTab=c);d.Array.each(this.params.tabs,function(c,a){c.tabNavigationObj.toggleClass("active",a===e);a===e&&this._showPanelByIndex(e)},this)},_showField:function(a){(this._isDialogField2(a)&&a.get("visible")||!this._isDialogField2(a)&&!a.config.hidden)&&a.show(!0)},_showPanelByIndex:function(a){if(a!=this.currentTabIndex){var b,c=d.Easing.easeBothStrong,e=this.params.tabs[a],g=
this.params.tabs[this.currentTabIndex];this.params.noTabAnim||(e.tabPanelObj.animation&&e.tabPanelObj.animation.stop(!0),g.tabPanelObj.animation&&g.tabPanelObj.animation.stop(!0));b=g.tabFields;this.params.noTabAnim?(g.tabPanelObj.setStyles({opacity:1,zIndex:"300"}),g.tabPanelObj.addClass("hidden")):(e.tabPanelObj.setStyles({left:(e.index>g.index?1:-1)*this.params.width+"px",opacity:1,zIndex:"300"}),g.tabPanelObj.setStyle("zIndex","0"),b=this._anim({node:g.tabPanelObj,to:{left:(e.index<g.index?1:
-1)*this.params.width+"px"},duration:0.5,easing:c}),b.on("end",function(){this.tab.addClass("hidden")},{tab:g.tabPanelObj}),b.run(),g.tabPanelObj.animation=b);this.currentTab=e;this.currentTabIndex=a;this.updateTitle();e.tabPanelObj.removeClass("hidden");this.params.noTabAnim?(b=this.currentTab.tabFields,d.Array.forEach(b,function(c){this._showField(c)},this),this.focusTab(),this.activateErrors()):(b=this._anim({node:e.tabPanelObj,to:{left:0},duration:0.5,easing:c}),b.on("end",function(){d.Array.forEach(this.currentTab.tabFields,
function(c){this._showField(c)},this);this.focusTab();this.activateErrors()},this),b.run(),e.tabPanelObj.animation=b);this.currentTab.height&&(this.currentTab.tabPanelObj.setStyle("height",g.height-50),this._anim({node:this.bodyEl,to:{height:this.currentTab.height},duration:0.5,easing:c}).run());this.bodyEl.toggleClass("scrollable",!!this.currentTab.scroll);this.currentTab.scroll?this.bodyEl.plug(d.Squarespace.Plugin.ScrollLock):this.bodyEl.unplug(d.Squarespace.Plugin.ScrollLock);this.fire("tab-shown",
{name:this.currentTab.name,title:this.currentTab.title})}},render:function(){var a;this.rendered||(this.observedHeight=0,this.tabs=[],this.tabsEl.setContent(""),d.Array.each(this.params.tabs,function(b,c){a=d.Node.create('<a href="javascript:noop();" class="configuration-container-tab">'+b.tabTitle+"</a>");a.setData("index",c);0===c&&a.addClass("active");1<this.params.tabs.length&&(this.params.tabs[c].noTabTitle&&a.addClass("noTabTitle"),this.bodyEvents.push(a.on("click",function(c){c.preventDefault();
this.activateTab.apply(this,arguments)},this)),this.tabsEl.append(a));this.params.tabs[c].tabNavigationObj=a;this.params.tabs[c].index=c;this.renderTab(this.params.tabs[c],0==c)},this),this.renderButtons(),this.bodyHeight||(this.preferredHeight=this.bodyHeight=this.observedHeight+14),"fit"==this.params.verticalHeight&&this.bodyHeight>this.observedHeight&&(this.bodyHeight=this.observedHeight),this.fire("rendered"),this.rendered=!0,this.bodyEl.setStyle("height",this.bodyHeight+"px"),this.controlsEl&&
this.controlsEl.setStyle("height",this.controlsHeight+"px"),this._updatePosition(!0),this.params.autoFocus&&this.focusTab())},getButtons:function(){return this.params.buttons},setButtons:function(){var a=arguments;1===arguments.length&&d.Lang.isArray(arguments[0])&&(a=arguments[0]);this.params.buttons=[];this.destroyButtons();a.forEach(function(a){this.params.buttons.push(a)},this);this.isVisible()&&this.renderButtons()},_removeButton:function(a){var b=d.Array.filter(this.getButtons(),function(c,
e){return c!==a&&c.type!==a},this);this.setButtons(b)},_getNextTabIndex:function(){return this.BUTTONS_BASE_IDX+this.lastTabIndex++},_disableButton:function(a){a.addClass("disabled").one("input").set("disabled","disabled")},renderButtons:function(){this.saveAndCloseButton=d.Node.create(d.Lang.sub('<input class="saveAndClose" tabIndex="{tabIndex}" type="button" value="Save &amp; Close" />',{tabIndex:this._getNextTabIndex()}));this.saveButton=d.Node.create(d.Lang.sub('<input class="save" tabIndex="{tabIndex}" type="button" value="Save" />',
{tabIndex:this._getNextTabIndex()}));this.cancelButton=d.Node.create(d.Lang.sub('<a class="cancel" href={href} tabIndex="{tabIndex}">Cancel</a>',{tabIndex:this._getNextTabIndex(),href:"javascript:noop();"}));this.removeButton=d.Node.create(d.Lang.sub('<input class="remove" tabIndex="{tabIndex}" type="button" value="Remove" />',{tabIndex:this._getNextTabIndex()}));this.buttonEvents.push(d.on("click",function(c){c.halt();this._getButtonClickHandler("saveAndClose",this.saveAndClose)(c)},this.saveAndCloseButton,
this),d.on("click",this._getButtonClickHandler("save",this.save),this.saveButton),d.on("click",this._getButtonClickHandler("remove",this.remove),this.removeButton),d.on("click",this._getButtonClickHandler("close",this.close),this.cancelButton),d.on("click",this._getButtonClickHandler("cancel",this.cancelClick),this.cancelButton));var a,b=d.clone(this.params.buttons);i=this.params.buttons.length;for(0<i&&b.reverse();0<=--i;){var c;if(a=b[i]){switch(a.type){case "cancel":this.cancelButton.set("innerHTML",
a.title);c=d.Node.create('<div class="cancel-block"></div>');c.append(this.cancelButton);break;case "save":this.saveButton.set("value",a.title);c=d.Node.create('<div class="button-block"></div>');c.append(this.saveButton);break;case "remove":this.removeButton.set("value",a.title);c=d.Node.create('<div class="button-block"></div>');c.append(this.removeButton);break;case "saveAndClose":this.saveAndCloseButton.set("value",a.title);c=d.Node.create('<div class="button-block"></div>');c.append(this.saveAndCloseButton);
break;default:var e;"text"===a.style?(e='<a href="javascript:noop();">'+a.title+"</a>",c=d.Node.create('<div class="cancel-block"></div>')):(e=d.Node.create('<input type="button" value="'+a.title+'" />'),a.className&&e.addClass(a.className),c=d.Node.create('<div class="button-block"></div>'));c.append(e);this.publish("button-"+a.type,{emitFacade:!0,prefix:"EditingDialog",broadcast:2});this.buttonEvents.push(d.on("click",this._getButtonClickHandler(a.type),e))}this.buttonHolder.append(c);a.disabled&&
this._disableButton(c)}}},cancelClick:function(a){this.fire("cancel-click")},_getButtonClickHandler:function(a,b){return d.bind(function(c){this.fire("button-"+a)?d.Lang.isFunction(b)&&b.call(this,c):c.halt();this.fire("button-click",{type:a})},this)},showSaveOverlay:function(a){this.params.disableSaveOverlay||(this.saveOverlay&&(this.saveOverlay.remove(),this.saveOverlay=null),a=this.titleEl.get("offsetHeight"),this.saveOverlay=d.Node.create('<div class="save-overlay">&nbsp;</div>'),this.saveOverlay.on("mousedown",
function(a){a.halt()}),this.saveOverlay.setStyles({height:this.mainEl.get("offsetHeight")-a-10+"px",marginTop:a+5+"px",width:this.bodyEl.get("offsetWidth")+"px"}),this.mainEl.append(this.saveOverlay),this.tabsEl.addClass("hidden"),this.saveOverlay.addClass("visible"))},hideSaveOverlay:function(){this.saveOverlay?(this.saveOverlay.addClass("hidden"),this.tabsEl.removeClass("hidden"),d.later(300,this,function(){this.saveOverlay.remove();this.saveOverlay=null}),this._setState("EDITING"),this.updateTitle()):
this._setState("EDITING")},allowEditing:function(){this.hideSaveOverlay();this.clearEdited();this.fire("editing-allowed");this._setState("EDITING")},save:function(){this._showLocalErrors()||(this._debug.log("save"),this.closeOnSend=!1,this._saveData())},_showLocalErrors:function(){this.hideErrors();var a=function(c){return c.inActiveFrame},b=this.currentTab,c=function(c){return c.inActiveFrame&&c.tab.name===b.name},e=d.Object.values(this.fields),e=this.params.validateActiveTabOnly?e.filter(c,this):
e.filter(a,this),g=!1,h={};d.Array.map(e,function(c){return{field:c,errors:c.getErrors()}}).forEach(function(c){var a=c.errors;a[a.length-1]&&(h[c.field.getName()]=a[a.length-1],g=!0)},this);g&&this.showErrors(h);return g},saveAndShow:function(){this._showLocalErrors()||(this._debug.log("saveAndShow"),this.closeOnSend=!1,this._saveData(),this.show())},saveAndClose:function(){this._showLocalErrors()||(this.fire("preClose"),this._debug.log("saveAndClose"),this.params.closeable&&(this.closeOnSend=!0),
this._saveData())},_saveData:function(){this._debug.log("_saveData");this._isState("SAVING")?this._debug.log("_saveData","Exiting because dialog state is in SAVING"):(this.clearEdited(),this.hideErrors(),this._setState("SAVING"),this.updateTitle(),this.showSaveOverlay(),this._debug.log("_saveData","fire","send-requested"),this.fire("send-requested"))},remove:function(a){a&&a.halt();this.fire("remove-requested")},canClose:function(a,b){if(!this._shown)return console.log("not yet shown!"),!1;if(!d.Array.every(this.childDialogs,
function(c){return c.canClose(this.saveAndClose,this.cancel)},this))return!1;if((this.edited||this.editedSinceLastSave)&&this.params.discardChangesConfirmation){var c=!1,e;for(e in this.fields)this.fields[e].didDataChange()&&(c=!0);if(c)return c=new d.Squarespace.Widgets.Confirmation({render:this.el.ancestor("body")||!0,style:d.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,showOverlay:!0,"strings.confirm":"Save","strings.reject":"Discard","strings.title":"Review Changes","strings.message":"You have made changes. Do you want to save or discard them?"}),
c.on("confirm",function(){this.clearEdited();this._debug.log("canClose","calling onSuccess()",a);a.call(this)},this),c.on("reject",function(){this.clearEdited();this._debug.log("canClose","calling onReject()",b);b.call(this)},this),c.on("cancel",function(){d.Squarespace.EscManager.addTarget(this);this._debug.log("canClose","onCancel");this.fire("cancel-close")},this),this._debug.log("canClose",!1,"Showing confirmation dialog"),!1}this._debug.log("canClose",!0);return!0},close:function(a,b){this._debug.log("close",
a);if(!this._isState("EDITING")&&!this._isState("SAVING"))this._debug.log("close","Exiting because state is in Editing or Saving.");else{if(b)this._debug.log("canClose skipped due to force = true");else if(!1===this.canClose(this.saveAndClose,this.cancel)){this._debug.log("close","Exiting because canClose came back false");return}this.fire("close");this.dismiss(!0)}},cancel:function(a){this._debug.log("cancel",a);if(this._isState("EDITING")||this._isState("SAVING"))this.clearEdited(),this.fire("cancel"),
this.dismiss(!1)},dismiss:function(a){a=a?d.bind(this.destroy,this):d.bind(this._finishCancelation,this);this.fire("dismiss");this._setState("CLOSING");this.updateTitle();this.clearEdited();this._preDestroy();this.hideErrors();this.params.overlay&&this.restoreBodyScroll();switch(this.params.hideAnim){case "noHideAnimation":a();break;case "custom":this.params.customHideAnim(this.el,a);break;default:this.el.removeClass("visible"),d.later(b.animationDurationInMs,this,a)}this.params.overlay&&this.overlayEl&&
(this.overlayEl.destroying=!0,this.overlayEl.addClass("hidden"),d.later(300,this,function(){this.overlayEl.remove();this.overlayEl=null}))},_finishCancelation:function(){this.fire("render-anchor",this.getInitialData());this.destroy();this._setState("CLOSED");this.fire("canceled")},_preDestroy:function(){var a=0,b;this._preDestroyCalled=!0;a=d.Squarespace.OPEN_DIALOGS.indexOf(this);-1!==a&&d.Squarespace.OPEN_DIALOGS.splice(a,1);0===d.Squarespace.OPEN_DIALOGS.length&&d.one(document.body).removeClass("dialog-open");
this._applyMethodToChildren("close");a=0;for(b=this.timers.length;a<b;++a)this.timers[a].cancel();this.timers=[];d.Squarespace.EscManager&&d.Squarespace.EscManager.removeTarget(this);this.activeFlyout&&this.activeFlyout.field.closeFlyout();d.Squarespace.ToolTipManager&&this.params.disableTips&&d.Squarespace.ToolTipManager.enableTooltips();this.firstShowEvent&&(this.firstShowEvent.detach(),this.firstShowEvent=null);this.anchorEl&&this.anchorEl._node&&this.anchorEl.removeClass("targeted")},getErrors:function(){var a=
0,b={},c;for(c in this.fields){var e=this.fields[c],g=!1;if(g=this._isDialogField2(e)?e.get("required")&&e.isEmpty():e.config.required&&(""===e.getValue()||0===e.getValue()))b[e.getName()]="This is a required field.",a++}return{errors:a,errorSet:b}},send:function(){var a=this.getErrors(),b=a.errorSet;a.errors?(this.showErrors(b),this.fire("local-errors")):(this.closeOnSend&&(this.saved=!0,this.closeOnSend=!1,this.close()),this.fire("sent"))},updateAutoSave:function(a,b){if(this.autosaveEl.inDoc()){this.autosaveEl.setStyle("display",
"block");var c=this._anim({node:this.autosaveEl,from:{opacity:1},to:{opacity:0.5},duration:0.25,easing:d.Easing.easeOutStrong});c.on("end",function(){a?this.autosaveEl.set("innerHTML",a):(this.autosaveEl.set("innerHTML",'Last saved <span class="time"></span>.'),this.autosaveEl.one(".time").plug(d.Squarespace.RelativeTimeDisplay));b?this.autosaveEl.addClass("error"):this.autosaveEl.removeClass("error");this.autosaveEl.ancestor("body")&&this._anim({node:this.autosaveEl,from:{opacity:0.5},to:{opacity:1},
duration:0.25,easing:d.Easing.easeOutStrong}).run()},this);c.run()}this.editedSinceLastSave=!1},_recordFieldData:function(a,b){d.Object.each(b.fields,function(c){if(d.Lang.isFunction(c.getValue)){var b=c.getValue();a[c.getName()]=b;if(void 0!==c.getAssociatedVars)for(var b=c.getAssociatedVars(),g=0;g<b.length;g++)a[b[g].name]=b[g].value}c.fields&&this._recordFieldData(a,c)},this)},getData:function(){var a={},b;for(b in this.params.initialData)a[b]=this.params.initialData[b];this._recordFieldData(a,
this);return a},getField:function(a){var b=this.fields[a];if(d.Lang.isValue(b))return b;for(var c in this.fields)if(this.fields[c].getField&&(b=this.fields[c].getField(a),d.Lang.isValue(b)))return b},getSection:function(a){return this.sections[a]},_renderFields:function(a,b,c,e){d.Array.each(b,function(g,h){var q;if(g){var l=g.type;!e&&!this.params.dontSetWidthOnFields&&(e=this.params.width-60);e&&!isNaN(e)&&(this._debug.log("availableWidth: ",e),this._debug.log("fieldConfig.width: ",g.width),q=(g.ctor&&
g.config?g.config.width:g.width)||1,q=1>=q?Math.floor(q*e):q);"splitter"===l?this._renderSplitter(g,h,b,a,c,e,q):"multi-frame"===l?this._renderMultiFrame(g,h,b,a,c,e,q):"section"===l?this._renderSection(g,h,b,a,c,e,q):"stack"===l?this._renderStack(g,h,b,a,c,e,q):g.ctor&&g.ctor===d.Squarespace.DialogFields.MultiFrame?this._renderDF2MultiFrame(g,h,b,a,c,e,q):this._renderField(g,h,b,a,c,e,q)}},this)},_renderSplitter:function(a,b,c,e,g,h,q){b=d.Node.create('<div class="split-field clear '+(1<a.fields.length?
"padding-adjust":"")+'"></div>');a.width||(a.width=1);h&&!isNaN(h)?(b.setStyle("width",Math.round(a.width*h)+30+"px"),h-=30*(a.fields.length-1)):h=g.get("offsetWidth")-30*(a.fields.length-1)-60;g.append(b);this._renderFields(e,a.fields,b,h);a.countHeight&&(this._takenHeight+=b.get("offsetHeight"));a.hidden&&b.hide()},_renderMultiFrame:function(a,b,c,e,g,h,q){b=new d.Squarespace.DialogFieldGenerators["multi-frame"](a,this.params.initialData,this);b.type=a.type;b.append(e,c,g,h);b.getName()?this.fields[b.getName()]=
b:this._noNameFields.push(b)},_renderDF2MultiFrame:function(a,b,c,e,g,h,q){b=d.merge(a,a.config,{dialog:this,data:this.params.initialData[a.config.name],render:g});a=new a.ctor(b);h&&a.get("boundingBox").setStyle("width",q+"px");(h=a.getName()||a.get("name"))?this.fields[h]=a:this._noNameFields.push(a);a.each(function(c){var a=c.getName()||c.get("name");a?this.fields[a]=c:this._noNameFields.push(c);e.tabFields.push(c);c.tab=e},this)},_renderSection:function(a,b,c,e,g,h,q){b=d.Node.create('<div class="section-inner clear"></div>');
c="section-field container-field-wrapper field-wrapper clear ";void 0!==a.style&&(c+=a.style);c=d.Node.create('<div class="'+c+'"></div>');c.append(b);g.append(c);a.width||(a.width=1);(g=Math.round(a.width*h))&&c.setStyle("width",g+"px");h=Math.round(a.width*h);this._renderFields(e,a.fields,b,h);a.hidden&&c.hide();a.name&&(this.sections[a.name]=c)},_renderStack:function(a,b,c,e,g,h,q){(q=h)||(q=this.params.width-60);h=d.Node.create('<div class="stack-field stack-field-wrapper clear"></div>');g.append(h);
a.width||(a.width=1);a["float"]&&h.setStyle("float",a["float"]);h.setStyle("width",Math.round(a.width*q)+"px");b!==c.length-1&&h.setStyle("paddingRight","30px");b=Math.round(a.width*q);this._renderFields(e,a.fields,h,b);a.hidden&&h.hide();a.name&&(this.sections[a.name]=h)},_renderField:function(a,b,c,e,g,h,q){var l;b=d.merge(a,a.config||{},{dialog:this,render:g});c=b.name||a.name;this._debug.isTimingEnabled()&&this._debug.time("render field: "+c);d.Lang.isUndefined(b.data)&&(this.params.initialData&&
!d.Lang.isUndefined(c))&&(b.data=this.params.initialData[c],b.panel=this);if(a.ctor)l=new a.ctor(b);else{if(!a.type)throw console.error("dialog: field type was",a.type,", and constructor was",a.ctor),console.error("dialog: config was",a),Error("Could not find field constructor or field type.");var n=this._convertToDialogField2Name(a.type),n=d.namespace("Squarespace.DialogFields")[n];if(!n&&!d.Squarespace.DialogFieldGenerators[a.type])throw Error("Unknown field type: "+a.type);this._debug.log("Generating field type: ",
a.type);n?l=new n(b):(console.log("Attempting to use DFG: ",a.type),l=new d.Squarespace.DialogFieldGenerators[a.type](a,this.params.initialData,this),l.type=a.type,l.append(g))}a.verticalSpan&&(this._verticalEl=l);a.countHeight&&!a.verticalSpan&&(l.getTakenHeight?this._takenHeight+=l.getTakenHeight():(this._takenHeight+=l.get("boundingBox").get("offsetHeight"),this._takenHeight+=parseInt(l.get("boundingBox").getStyle("marginTop"),10),this._takenHeight+=parseInt(l.get("boundingBox").getStyle("marginBottom"),
10)));h&&(this._isDialogField2(l)?(this._debug.log("setting width",q),l.get("boundingBox").setStyle("width",q+"px")):l.html&&(this._debug.log("setting width",q),l.html.setStyle("width",q+"px")));l.resize&&l.resize();a.hidden&&l.temporaryHide(!0);this._isDialogField2(l)?this.bodyEvents.push(l.on("dataStateChange",function(c){c=c.newVal;l.getProperty("DATA_STATES");this.fire("field-loading-change",{field:l,loading:c===c.LOADING})},this)):this.bodyEvents.push(l.on("loadingChange",function(c){this.fire("field-loading-change",
{field:l,loading:c.newVal})},this));l.getName()?this.fields[l.getName()]=l:this._noNameFields.push(l);e.tabFields.push(l);l.tab=e;this._debug.isTimingEnabled()&&this._debug.timeEnd("render field: "+c)},_isDialogField2:function(a){return d.Lang.isValue(a)&&d.Lang.isValue(d.Squarespace.DialogField2)&&a instanceof d.Squarespace.DialogField2},_setState:function(a){d.Lang.isValue(d.Squarespace.DialogStates[a])?this.state=d.Squarespace.DialogStates[a]:console.warn("[Dialog] Invalid state.")},_isState:function(a){return d.Lang.isString(a)?
this.state===d.Squarespace.DialogStates[a]:this.state===a},resizeVerticalFields:function(){d.Array.each(this.verticalFields,function(a,b){var c=this.getBodyHeight()-a._takenHeight;this._isDialogField2(a)?(c-=parseInt(a.get("boundingBox").getStyle("marginTop"),10),c-=parseInt(a.get("boundingBox").getStyle("marginBottom"),10),a.set("height",c)):a.setHeight(c)},this)},renderTab:function(a,b){var c=d.Node.create('<div class="tab-wrapper"></div>');d.Lang.isValue(a.name)&&c.addClass("dialog-tab-"+a.name);
c.setStyles({width:this.params.width+"px",left:b?"0px":this.params.width+"px"});this.bodyEl.append(c);a.tabFields=[];this._verticalEl=null;this._takenHeight=0;this._renderFields(a,a.fields||[],c);a.noTabTitle&&c.addClass("noTabTitle");if(this._verticalEl){var e=parseInt(c.getStyle("paddingTop"),10);isNaN(parseInt(c.getStyle("marginTop"),10))||(e+=parseInt(c.getStyle("marginTop"),10));this._takenHeight+=e;var g=this._isDialogField2(this._verticalEl);!g&&!this._verticalEl.setHeight&&console.error("No setHeight for vertical el: ",
this._verticalEl);e=this.getBodyHeight()-this._takenHeight;g?(g=this._verticalEl.get("boundingBox"),e-=parseInt(g.getStyle("marginTop"),10),e-=parseInt(g.getStyle("marginBottom"),10),this._verticalEl.set("height",e)):this._verticalEl.setHeight(e);this._verticalEl._takenHeight=this._takenHeight;this.verticalFields.push(this._verticalEl)}a.tabPanelObj=c;this.observedHeight+=c.get("offsetHeight");b&&a.tabFields&&d.Array.forEach(a.tabFields,function(c){this._showField(c)},this);this.bodyEl.toggleClass("scrollable",
!!a.scroll);b||c.addClass("hidden");return c},_convertToDialogField2Name:function(a){a=d.Squarespace.Utils.slugify(a).split("-");for(var b=a.length-1;0<=b;b--)a[b].capitalize&&(a[b]=a[b].capitalize());return a.join("")+"Field"},_destroyFields:function(){this.fields&&(d.Object.each(this.fields,function(a,b){a.destroy()},this),this._destroyNoNameFields());this.fields={}},_destroyNoNameFields:function(){d.Array.each(this._noNameFields,function(a){a&&a.destroy()},this);this._noNameFields=[]},destroyBody:function(){this.rendered=
!1;this._destroyFields();this.bodyEl&&this.bodyEl._node&&this.bodyEl.empty();d.Array.each(this.params.tabs,function(a){a.tabPanelObj=null;a.tabNavigationObj=null;a.tabFields=null});this._detachEventArray(this.bodyEvents);this.bodyEvents=[]},_detachEventArray:function(a){d.Array.each(a,function(a){a.detach()})},destroyButtons:function(){this._detachEventArray(this.buttonEvents);this.buttonEvents=[];this.buttonHolder&&this.buttonHolder._node&&this.buttonHolder.set("innerHTML","")},_destroy:function(){this.preDestroyCalled||
this._preDestroy();this.bodyHeight=this.currentErrors=this.destroyTimer=null;this.destroyBody();this.destroyButtons();this.overlayEl&&!this.overlayEl.destroying&&(this.overlayEl.remove(),this.overlayEl=null);this._onBeforeUnloadEvt&&this._onBeforeUnloadEvt.detach();this._detachEventArray(this.globalEvents);this.dd&&(this.dd.destroy(),this.dd=null);this.globalEvents=[];this.el&&(this.el.remove(!0),this.bodyEl=this.el=null);this.params.parentDialog&&(this.params.parentDialog.removeChildDialog(this),
this.params.parentDialog=null);this._setState("CLOSED");this.anchorEl=this.position=null}})},"1.0",{requires:"anim attribute datatype-date dd json node node-event-simulate node-focusmanager squarespace-beforeunload squarespace-debugger squarespace-dialog-field-2 squarespace-dialog-fields squarespace-dialog-legacy-multi-frame squarespace-escmanager squarespace-gizmo squarespace-plugin-scroll-lock squarespace-ui-base squarespace-widgets-confirmation transition".split(" ")})},763:function(p,m,k){YUI.add("squarespace-dialog-legacy-multi-frame",
function(b){b.namespace("Squarespace.DialogFieldGenerators");b.Squarespace.DialogFieldGenerators["multi-frame"]=Class.extend(b.Squarespace.DialogField,{initialize:function(d,a,f){this._super(d,a,f);this.frames={};this.activeEl=null;this.value=this.config.initialFrame;this.panel.bodyEvents.push(b.on("click",this.onClick,this.html,this))},onClick:function(b){this.panel.fire("datachange",this)},show:function(d){var a=this.frames[d];if(!(a&&a===this.activeEl)){if(this.activeEl){this.activeEl.a&&this.activeEl.a.stop();
var f=this.activeEl.fields;this.activeEl.a=this._anim({node:this.activeEl.el,to:{height:0},duration:0.3,easing:b.Easing.easeOutStrong});f.forEach(this.setInActiveFrame(!1),this);this.activeEl.a.on("end",function(c){c.target.get("node").addClass("hidden")},this);this.activeEl.a.run()}a.a&&a.a.stop();this.activeEl&&a.el.ancestor().insertBefore(a.el,this.activeEl.el.next());a.el.removeClass("hidden");f=a.el.getStyle("height");a.el.setStyles({height:null});a.realHeight=a.el.get("offsetHeight");a.el.setStyles({height:f});
a.a=this._anim({node:a.el,to:{height:a.realHeight},duration:0.3,easing:b.Easing.easeOutStrong});a.a.on("end",function(c,a){for(var b=0;b<a.fields.length;++b){var h=this.panel.fields[a.fields[b].name];h&&h.updateInlineTitle&&h.updateInlineTitle()}this.focusCurrentFrame()},this,a);a.a.run();a.fields.forEach(this.setInActiveFrame(!0),this);this.activeEl=a;this.value=d}},focusCurrentFrame:function(){for(var d,a=0;a<this.activeEl.fields.length;++a)if(d=this.activeEl.fields[a],d=this.panel.fields[d.name||
b.Object.getValue(d,["config","name"])],b.Lang.isValue(d)&&d.getNode){d.getNode().focus();break}},setInActiveFrame:function(b){return function(a){a.name&&(a=this.panel.getField(a.name),a.inActiveFrame=b,a.fire("mutli-frame-focus"))}},append:function(d,a,f,c){for(var e in this.config.frames){a=this.config.frames[e];var g=b.Node.create('<div class="frame-wrapper clear"></div>');f.append(g);this.panel._renderFields(d,a.fields,g,c);this.frames[e]=this.config.frames[e];this.frames[e].el=g;this.frames[e].realHeight=
g.get("offsetHeight");e!=this.config.initialFrame?(g.setStyle("height","0px"),g.addClass("hidden"),this.frames[e].visible=!1,this.config.frames[e].fields.forEach(this.setInActiveFrame(!1),this)):(this.activeEl=this.frames[e],this.frames[e].visible=!0,this.config.frames[e].fields.forEach(this.setInActiveFrame(!0),this))}}})},"1.0.0",{requires:["anim","squarespace-dialog-fields","squarespace-util","widget"]})},764:function(p,m,k){YUI.add("squarespace-gizmo",function(b){b.namespace("Squarespace");var d=
/[ ]+/g,a=/[^a-zA-Z0-9\-]/g,f=function(c,a,h,d,f){return(f?b.Array.reject:b.Array.filter)(c,function(c){for(var b=0;b<h.length;++b)if(c[h[b]]!==d[b])return!1;a&&a(c);return!0})},c=function(a,g,h,d,f){if(!this._destroyed){if(b.Lang.isArray(g))return b.Array.map(g,function(g){return c.apply(this,[a].concat(b.Array(g)))},this);if(b.Lang.isObject(g)&&b.Lang.isFunction(g[a])){var n=[h,d,f||this],n=n.concat(Array.prototype.slice.call(arguments,5)),n=g[a].apply(g,n);this._eventSubList.push({object:g,event:h,
eventSub:n});return n}throw"Gizmo["+this._name+"]: Could not subscribe to event: "+h;}};b.Squarespace.Gizmo=Class.create({_name:"Gizmo",_events:{render:{},rendered:{},destroy:{},destroyed:{}},initialize:function(c){b.augment(this,b.EventTarget,!0,null,{prefix:this._name});this.params=b.merge(c);this._initState();c=this;for(var a=function(c,a){this.publish(a,c)};null!==c&&void 0!==c;)b.Object.each(c._events,a,this),c=c.superclass},getClassNames:function(){for(var c=this,a=[];;c=c.superclass){if(!c)return a;
a.push(c.getClassName())}},_initState:function(){this._parentEl=this._el=null;this._eventSubList=[];this._anims=[];this._timers=[];this.destroyed=this._destroyed=!1;this._children=[];this._guid=b.guid();this._name||(this._name="No Name")},getClassName:function(){return this._name},getId:function(){return this._guid},getCssClassName:function(){var c=this._name,c=c.trim().replace(d,"-").replace(a,"").toLowerCase();return"squarespace-"+c},getElement:function(){return this._el},render:function(c){this.fire("render");
c=c||this._parentEl;this.params.noBoundingBox?this._el=this._render():(this._el=b.Node.create("<div></div>"),this._el.addClass(this.getCssClassName()+"-bbox"),this._el.append(this._render()));c&&b.Lang.isFunction(c.append)&&c.append(this._el);this._parentEl=c;this.fire("rendered")},_render:function(){},_subscribe:function(a,g,h,d){var f=["on"].concat(b.Array(arguments));return c.apply(this,f)},_subscribeOnce:function(a,g,h,d){var f=["once"].concat(b.Array(arguments));return c.apply(this,f)},_subscribeBefore:function(a,
g,h,d){var f=["before"].concat(b.Array(arguments));return c.apply(this,f)},_subscribeAfter:function(a,g,h,d){var f=["after"].concat(b.Array(arguments));return c.apply(this,f)},_unsubscribe:function(c,a){this._eventSubList=f(this._eventSubList,function(c){c.eventSub.detach()},a?["object","event"]:["object"],b.Array(arguments),!0)},_detach:function(c){this._eventSubList=f(this._eventSubList,function(c){c.eventSub.detach()},["eventSub"],[c],!0)},_clearEvents:function(){for(var c=this._eventSubList,a=
0;a<c.length;++a)c[a].eventSub.detach();this._eventSubList=[]},destroy:function(){if(this._destroyed)console.warn("Gizmo["+this._name+"] already destroyed.");else{if(!this._eventSubList)throw console.error("Gizmo not initialized for...",this),"Gizmo["+this._name+"] was never initialzed.  Missing _super?";this.fire("destroy");this._destroy();var c=0;this._clearEvents();this._eventSubList=[];var a=[];b.Array.each(this._anims,function(c){a.push(c)},this);b.Array.each(a,function(c){c.get("running")&&
c.stop(!1);c.destroy()});this._anims=null;for(c=this._children;0<c.length;){var h=c[0];h._removeParent();h.destroy()}this._children=null;h=this._timers;for(c=0;c<h.length;++c)h[c].cancel();this._timers=null;this._el&&b.Lang.isFunction(this._el.remove)&&(this._el.remove(),this._el=null);this.destroyed=this._destroyed=!0;this.fire("destroyed")}},_destroy:function(){},isDestroyed:function(){return this._destroyed},_setParent:function(c){this._parentGizmo=c},_removeParent:function(){this._parentGizmo&&
(this._parentGizmo._removeChild(this),this._parentGizmo=null)},_addChild:function(c){this._children&&(c._setParent&&c._setParent(this),this._children.push(c))},_removeChild:function(c){this._children.splice(this._children.indexOf(c),1)},_getChildren:function(){return this._children},_anim:function(c){if(!this._destroyed){if(!c.node)throw Error("Gizmo["+this._name+"]: Animation must specify a node!");var a;c.node.ancestor("body",!0)?c.node._node?(a=new b.Anim(c),a.on("end",function(c){this._removeAnim(a)},
this),this._anims.push(a)):(console.warn("Gizmo["+this._name+"]: _anim passed a YUI node with _node = null! Returning an empty animation."),console.trace(),a=new b.Anim):(console.warn("Gizmo["+this._name+"]: _anim passed a YUI node not in the DOM! Returning an empty animation."),a=new b.Anim);return a}},_removeAnim:function(c){c=this._anims.indexOf(c);-1!==c&&this._anims.splice(c,1)},_trace:function(c){for(var a=this.getEvent(c).getSubs(),h=[],d=function(c,a){if(c.context&&c.context.getName)h.push(c.context.getName());
else{var b={};b[c.fn.name]=c.fn.toString();h.push(b)}},f=0;f<a.length;++f)b.Object.each(a[f],d);console.log("[trace] Event",c,"is notifying the following:",h);this.fire(c)},_later:function(c,a,h,d,f){if(!this._destroyed)return c=b.later(c,h||this,a,d,f),this._timers.push(c),c},_cb:function(c){return b.bind(function(){if(!this._destroyed)return c.apply(this,arguments)},this)}});b.augment(b.Squarespace.Gizmo,b.EventTarget);b.Squarespace.ZombieGizmo=Class.extend(b.Squarespace.Gizmo,{_name:"ZombieGizmo",
_events:{resurrect:{},resurrected:{}},initialize:function(c){this._super(c)},destroy:function(){this._super();this.resurrect()},resurrect:function(){this.fire("resurrect");this._initState();this.fire("resurrected")}})},"1.0",{requires:["array-extras","node","event-custom"]})},789:function(p,m,k){YUI.add("squarespace-widgets-data-widget",function(b){b.namespace("Squarespace.Widgets");var d=b.Squarespace.Widgets.DataWidget=b.Base.create("dataWidget",b.Squarespace.Widgets.SSWidget,[],{initializer:function(a){a.dataState||
(this.getProperty("ASYNC_DATA")?this.set("dataState",this.getProperty("DATA_STATES").INITIALIZED):this.set("dataState",this.getProperty("DATA_STATES").LOADED))},renderUI:function(){d.superclass.renderUI.call(this);this._updateDataStateClassName()},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("id");this.after(a+"|dataChange",function(a){a.noSyncUI||this.syncUI()},this);this.after(a+"|dataStateChange",this._updateDataStateClassName,this)},_updateDataStateClassName:function(){var a=
this.get("boundingBox"),d=this.get("dataState");b.Object.each(this.getProperty("DATA_STATES"),function(c){a.removeClass("data-state-"+c)});a.addClass("data-state-"+d)},setLoadingState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOADING)},setLoadedState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOADED)},setLoadFailedState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOAD_FAILED)},loadedSuccessfully:function(){return this.get("dataState")===
this.getProperty("DATA_STATES").LOADED},isLoading:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOADING},loadFailed:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOAD_FAILED}},{CSS_PREFIX:"sqs-data-widget",ASYNC_DATA:!1,DATA_STATES:{INITIALIZED:"initialized",LOADING:"loading",LOADED:"loaded",LOAD_FAILED:"load-failed"},ATTRS:{data:{value:null,validator:function(a){return b.Lang.isUndefined(a)?(console.warn(this.name+": Will not set data to undefined."),
!1):!0}},dataState:{valueFn:function(){return this.getProperty("DATA_STATES").INITIALIZED}},preventRenderTemplate:{value:!1,validator:b.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","widget","squarespace-ss-widget","squarespace-attr-validators"]})},799:function(p,m,k){YUI.add("dd-constrain",function(b,d){var a=b.DD.DDM,f=null,c=function(){this._lazyAddAttrs=!1;c.superclass.constructor.apply(this,arguments)};c.NAME="ddConstrained";c.NS="con";c.ATTRS={host:{},stickX:{value:!1},
stickY:{value:!1},tickX:{value:!1},tickY:{value:!1},tickXArray:{value:!1},tickYArray:{value:!1},gutter:{value:"0",setter:function(c){return b.DD.DDM.cssSizestoObject(c)}},constrain:{value:"view",setter:function(c){var a=b.one(c);a&&(c=a);return c}},constrain2region:{setter:function(c){return this.set("constrain",c)}},constrain2node:{setter:function(c){return this.set("constrain",b.one(c))}},constrain2view:{setter:function(){return this.set("constrain","view")}},cacheRegion:{value:!0}};f={_lastTickXFired:null,
_lastTickYFired:null,initializer:function(){this._createEvents();this._eventHandles=[this.get("host").on("drag:end",b.bind(this._handleEnd,this)),this.get("host").on("drag:start",b.bind(this._handleStart,this)),this.get("host").after("drag:align",b.bind(this.align,this)),this.get("host").after("drag:drag",b.bind(this.drag,this))]},destructor:function(){b.Array.each(this._eventHandles,function(c){c.detach()});this._eventHandles.length=0},_createEvents:function(){b.Array.each(["drag:tickAlignX","drag:tickAlignY"],
function(c){this.publish(c,{type:c,emitFacade:!0,bubbles:!0,queuable:!1,prefix:"drag"})},this)},_handleEnd:function(){this._lastTickXFired=this._lastTickYFired=null},_handleStart:function(){this.resetCache()},_regionCache:null,_cacheRegion:function(){this._regionCache=this.get("constrain").get("region")},resetCache:function(){this._regionCache=null},_getConstraint:function(){var c=this.get("constrain"),a=this.get("gutter"),h;c&&(c instanceof b.Node?(this._regionCache||(this._eventHandles.push(b.on("resize",
b.bind(this._cacheRegion,this),b.config.win)),this._cacheRegion()),h=b.clone(this._regionCache),this.get("cacheRegion")||this.resetCache()):b.Lang.isObject(c)&&(h=b.clone(c)));if(!c||!h)c="view";"view"===c&&(h=this.get("host").get("dragNode").get("viewportRegion"));b.Object.each(a,function(c,a){h[a]="right"===a||"bottom"===a?h[a]-c:h[a]+c});return h},getRegion:function(c){var a={},b=null,d=null,d=this.get("host"),a=this._getConstraint();c&&(b=d.get("dragNode").get("offsetHeight"),d=d.get("dragNode").get("offsetWidth"),
a.right-=d,a.bottom-=b);return a},_checkRegion:function(c){var a=this.getRegion(),b=this.get("host"),d=b.get("dragNode").get("offsetHeight"),b=b.get("dragNode").get("offsetWidth");c[1]>a.bottom-d&&(c[1]=a.bottom-d);a.top>c[1]&&(c[1]=a.top);c[0]>a.right-b&&(c[0]=a.right-b);a.left>c[0]&&(c[0]=a.left);return c},inRegion:function(c){c=c||this.get("host").get("dragNode").getXY();var a=this._checkRegion([c[0],c[1]]),b=!1;c[0]===a[0]&&c[1]===a[1]&&(b=!0);return b},align:function(){var c=this.get("host"),
a=[c.actXY[0],c.actXY[1]],b=this.getRegion(!0);this.get("stickX")&&(a[1]=c.startXY[1]-c.deltaXY[1]);this.get("stickY")&&(a[0]=c.startXY[0]-c.deltaXY[0]);b&&(a=this._checkRegion(a));a=this._checkTicks(a,b);c.actXY=a},drag:function(){var c=this.get("host"),a=this.get("tickX"),d=this.get("tickY"),c=[c.actXY[0],c.actXY[1]];if((b.Lang.isNumber(a)||this.get("tickXArray"))&&this._lastTickXFired!==c[0])this._tickAlignX(),this._lastTickXFired=c[0];if((b.Lang.isNumber(d)||this.get("tickYArray"))&&this._lastTickYFired!==
c[1])this._tickAlignY(),this._lastTickYFired=c[1]},_checkTicks:function(c,b){var d=this.get("host"),f=d.startXY[0]-d.deltaXY[0],d=d.startXY[1]-d.deltaXY[1],l=this.get("tickX"),n=this.get("tickY");l&&!this.get("tickXArray")&&(c[0]=a._calcTicks(c[0],f,l,b.left,b.right));n&&!this.get("tickYArray")&&(c[1]=a._calcTicks(c[1],d,n,b.top,b.bottom));this.get("tickXArray")&&(c[0]=a._calcTickArray(c[0],this.get("tickXArray"),b.left,b.right));this.get("tickYArray")&&(c[1]=a._calcTickArray(c[1],this.get("tickYArray"),
b.top,b.bottom));return c},_tickAlignX:function(){this.fire("drag:tickAlignX")},_tickAlignY:function(){this.fire("drag:tickAlignY")}};b.namespace("Plugin");b.extend(c,b.Base,f);b.Plugin.DDConstrained=c;b.mix(a,{_calcTicks:function(c,a,b,d,f){var n=(c-a)/b,r=Math.floor(n),k=Math.ceil(n);if((0!==r||0!==k)&&n>=r&&n<=k)c=a+b*r,d&&f&&(c<d&&(c=a+b*(r+1)),c>f&&(c=a+b*(r-1)));return c},_calcTickArray:function(c,a,b,d){var f=0,n=a.length,r=0,k;if(!a||0===a.length)return c;if(a[0]>=c)return a[0];for(f=0;f<
n;f++)if(r=f+1,a[r]&&a[r]>=c)return k=c-a[f],c=a[r]-c,r=c>k?a[f]:a[r],b&&d&&r>d&&(r=a[f]?a[f]:a[n-1]),r;return a[a.length-1]}})},"3.17.2",{requires:["dd-drag"]})},800:function(p,m,k){YUI.add("dd-ddm-base",function(b,d){var a=function(){a.superclass.constructor.apply(this,arguments)};a.NAME="ddm";a.ATTRS={dragCursor:{value:"move"},clickPixelThresh:{value:3},clickTimeThresh:{value:1E3},throttleTime:{value:-1},dragMode:{value:"point",setter:function(a){this._setDragMode(a);return a}}};b.extend(a,b.Base,
{_createPG:function(){},_active:null,_setDragMode:function(a){null===a&&(a=b.DD.DDM.get("dragMode"));switch(a){case 1:case "intersect":return 1;case 2:case "strict":return 2}return 0},CSS_PREFIX:b.ClassNameManager.getClassName("dd"),_activateTargets:function(){},_drags:[],activeDrag:!1,_regDrag:function(a){if(this.getDrag(a.get("node")))return!1;this._active||this._setupListeners();this._drags.push(a);return!0},_unregDrag:function(a){var c=[];b.Array.each(this._drags,function(b){b!==a&&(c[c.length]=
b)});this._drags=c},_setupListeners:function(){this._createPG();this._active=!0;var a=b.one(b.config.doc);a.on("mousemove",b.throttle(b.bind(this._docMove,this),this.get("throttleTime")));a.on("mouseup",b.bind(this._end,this))},_start:function(){this.fire("ddm:start");this._startDrag()},_startDrag:function(){},_endDrag:function(){},_dropMove:function(){},_end:function(){this.activeDrag&&(this._shimming=!1,this._endDrag(),this.fire("ddm:end"),this.activeDrag.end.call(this.activeDrag),this.activeDrag=
null)},stopDrag:function(){this.activeDrag&&this._end();return this},_shimming:!1,_docMove:function(a){this._shimming||this._move(a)},_move:function(a){this.activeDrag&&(this.activeDrag._move.call(this.activeDrag,a),this._dropMove())},cssSizestoObject:function(a){a=a.split(" ");switch(a.length){case 1:a[1]=a[2]=a[3]=a[0];break;case 2:a[2]=a[0];a[3]=a[1];break;case 3:a[3]=a[1]}return{top:parseInt(a[0],10),right:parseInt(a[1],10),bottom:parseInt(a[2],10),left:parseInt(a[3],10)}},getDrag:function(a){var c=
!1,e=b.one(a);e instanceof b.Node&&b.Array.each(this._drags,function(a){e.compareTo(a.get("node"))&&(c=a)});return c},swapPosition:function(a,c){a=b.DD.DDM.getNode(a);c=b.DD.DDM.getNode(c);var e=a.getXY(),d=c.getXY();a.setXY(d);c.setXY(e);return a},getNode:function(a){return a instanceof b.Node?a:a=a&&a.get?b.Widget&&a instanceof b.Widget?a.get("boundingBox"):a.get("node"):b.one(a)},swapNode:function(a,c){a=b.DD.DDM.getNode(a);c=b.DD.DDM.getNode(c);var e=c.get("parentNode"),d=c.get("nextSibling");
d===a?e.insertBefore(a,c):c===a.get("nextSibling")?e.insertBefore(c,a):(a.get("parentNode").replaceChild(c,a),e.insertBefore(a,d));return a}});b.namespace("DD");b.DD.DDM=new a},"3.17.2",{requires:["node","base","yui-throttle","classnamemanager"]})},801:function(p,m,k){YUI.add("dd-ddm-drop",function(b,d){b.mix(b.DD.DDM,{_noShim:!1,_activeShims:[],_hasActiveShim:function(){return this._noShim?!0:this._activeShims.length},_addActiveShim:function(a){this._activeShims.push(a)},_removeActiveShim:function(a){var d=
[];b.Array.each(this._activeShims,function(c){c._yuid!==a._yuid&&d.push(c)});this._activeShims=d},syncActiveShims:function(a){b.later(0,this,function(a){a=a?this.targets:this._lookup();b.Array.each(a,function(c){c.sizeShim.call(c)},this)},a)},mode:0,POINT:0,INTERSECT:1,STRICT:2,useHash:!0,activeDrop:null,validDrops:[],otherDrops:{},targets:[],_addValid:function(a){this.validDrops.push(a);return this},_removeValid:function(a){var d=[];b.Array.each(this.validDrops,function(c){c!==a&&d.push(c)});this.validDrops=
d;return this},isOverTarget:function(a){if(this.activeDrag&&a){var b=this.activeDrag.mouseXY,c=this.activeDrag.get("dragMode"),e,d=a.shim;if(b&&this.activeDrag){e=this.activeDrag.region;if(c===this.STRICT)return this.activeDrag.get("dragNode").inRegion(a.region,!0,e);if(a&&a.shim){if(c===this.INTERSECT&&this._noShim)return b=e||this.activeDrag.get("node"),a.get("node").intersect(b,a.region).inRegion;this._noShim&&(d=a.get("node"));return d.intersect({top:b[1],bottom:b[1],left:b[0],right:b[0]},a.region).inRegion}}}return!1},
clearCache:function(){this.validDrops=[];this.otherDrops={};this._activeShims=[]},_activateTargets:function(){this._noShim=!0;this.clearCache();b.Array.each(this.targets,function(a){a._activateShim([]);!0===a.get("noShim")&&(this._noShim=!1)},this);this._handleTargetOver()},getBestMatch:function(a,d){var c=null,e=0,g;b.Object.each(a,function(a){var b=this.activeDrag.get("dragNode").intersect(a.get("node"));a.region.area=b.area;b.inRegion&&b.area>e&&(e=b.area,c=a)},this);return d?(g=[],b.Object.each(a,
function(a){a!==c&&g.push(a)},this),[c,g]):c},_deactivateTargets:function(){var a=[],d=this.activeDrag,c=this.activeDrop;d&&c&&this.otherDrops[c]?(d.get("dragMode")?(a=this.getBestMatch(this.otherDrops,!0),c=a[0],a=a[1]):(a=this.otherDrops,delete a[c]),d.get("node").removeClass(this.CSS_PREFIX+"-drag-over"),c&&(c.fire("drop:hit",{drag:d,drop:c,others:a}),d.fire("drag:drophit",{drag:d,drop:c,others:a}))):d&&d.get("dragging")&&(d.get("node").removeClass(this.CSS_PREFIX+"-drag-over"),d.fire("drag:dropmiss",
{pageX:d.lastXY[0],pageY:d.lastXY[1]}));this.activeDrop=null;b.Array.each(this.targets,function(c){c._deactivateShim([])},this)},_dropMove:function(){this._hasActiveShim()?this._handleTargetOver():b.Object.each(this.otherDrops,function(a){a._handleOut.apply(a,[])})},_lookup:function(){if(!this.useHash||this._noShim)return this.validDrops;var a=[];b.Array.each(this.validDrops,function(b){b.shim&&b.shim.inViewportRegion(!1,b.region)&&a.push(b)});return a},_handleTargetOver:function(){var a=this._lookup();
b.Array.each(a,function(a){a._handleTargetOver.call(a)},this)},_regTarget:function(a){this.targets.push(a)},_unregTarget:function(a){var d=[],c;b.Array.each(this.targets,function(c){c!==a&&d.push(c)},this);this.targets=d;c=[];b.Array.each(this.validDrops,function(b){b!==a&&c.push(b)});this.validDrops=c},getDrop:function(a){var d=!1,c=b.one(a);c instanceof b.Node&&b.Array.each(this.targets,function(a){c.compareTo(a.get("node"))&&(d=a)});return d}},!0)},"3.17.2",{requires:["dd-ddm"]})},802:function(p,
m,k){YUI.add("dd-ddm",function(b,d){b.mix(b.DD.DDM,{_pg:null,_debugShim:!1,_activateTargets:function(){},_deactivateTargets:function(){},_startDrag:function(){this.activeDrag&&this.activeDrag.get("useShim")&&(this._shimming=!0,this._pg_activate(),this._activateTargets())},_endDrag:function(){this._pg_deactivate();this._deactivateTargets()},_pg_deactivate:function(){this._pg.setStyle("display","none")},_pg_activate:function(){this._pg||this._createPG();var a=this.activeDrag.get("activeHandle"),b="auto";
a&&(b=a.getStyle("cursor"));"auto"===b&&(b=this.get("dragCursor"));this._pg_size();this._pg.setStyles({top:0,left:0,display:"block",opacity:this._debugShim?".5":"0",cursor:b})},_pg_size:function(){if(this.activeDrag){var a=b.one("body"),d=a.get("docHeight"),a=a.get("docWidth");this._pg.setStyles({height:d+"px",width:a+"px"})}},_createPG:function(){var a=b.Node.create("<div></div>"),d=b.one("body");a.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",
display:"none",height:"5px",width:"5px"});a.set("id",b.stamp(a));a.addClass(b.DD.DDM.CSS_PREFIX+"-shim");d.prepend(a);this._pg=a;this._pg.on("mousemove",b.throttle(b.bind(this._move,this),this.get("throttleTime")));this._pg.on("mouseup",b.bind(this._end,this));a=b.one("win");b.on("window:resize",b.bind(this._pg_size,this));a.on("scroll",b.bind(this._pg_size,this))}},!0)},"3.17.2",{requires:["dd-ddm-base","event-resize"]})},803:function(p,m,k){YUI.add("dd-delegate",function(b,d){var a=function(){a.superclass.constructor.apply(this,
arguments)},f=b.Node.create("<div>Temp Node</div>");b.extend(a,b.Base,{_bubbleTargets:b.DD.DDM,dd:null,_shimState:null,_handles:null,_onNodeChange:function(c){this.set("dragNode",c.newVal)},_afterDragEnd:function(){b.DD.DDM._noShim=this._shimState;this.set("lastNode",this.dd.get("node"));this.get("lastNode").removeClass(b.DD.DDM.CSS_PREFIX+"-dragging");this.dd._unprep();this.dd.set("node",f)},_delMouseDown:function(c){var a=c.currentTarget,d=this.dd,h=a,f=this.get("dragConfig");a.test(this.get("nodes"))&&
!a.test(this.get("invalid"))&&(this._shimState=b.DD.DDM._noShim,b.DD.DDM._noShim=!0,this.set("currentNode",a),d.set("node",a),f&&f.dragNode?h=f.dragNode:d.proxy&&(h=b.DD.DDM._proxy),d.set("dragNode",h),d._prep(),d.fire("drag:mouseDown",{ev:c}))},_onMouseEnter:function(){this._shimState=b.DD.DDM._noShim;b.DD.DDM._noShim=!0},_onMouseLeave:function(){b.DD.DDM._noShim=this._shimState},initializer:function(){this._handles=[];var c=this.get("dragConfig")||{},a=this.get("container");c.node=f.cloneNode(!0);
c.bubbleTargets=this;this.get("handles")&&(c.handles=this.get("handles"));this.dd=new b.DD.Drag(c);this.dd.after("drag:end",b.bind(this._afterDragEnd,this));this.dd.on("dragNodeChange",b.bind(this._onNodeChange,this));this.dd.after("drag:mouseup",function(){this._unprep()});this._handles.push(b.delegate(b.DD.Drag.START_EVENT,b.bind(this._delMouseDown,this),a,this.get("nodes")));this._handles.push(b.on("mouseenter",b.bind(this._onMouseEnter,this),a));this._handles.push(b.on("mouseleave",b.bind(this._onMouseLeave,
this),a));b.later(50,this,this.syncTargets);b.DD.DDM.regDelegate(this)},syncTargets:function(){if(b.Plugin.Drop&&!this.get("destroyed")){var c,a,d;if(this.get("target")){c=b.one(this.get("container")).all(this.get("nodes"));a=this.dd.get("groups");if((d=this.get("dragConfig"))&&d.groups)a=d.groups;c.each(function(c){this.createDrop(c,a)},this)}return this}},createDrop:function(c,a){var d={useShim:!1,bubbleTargets:this};c.drop||c.plug(b.Plugin.Drop,d);c.drop.set("groups",a);return c},destructor:function(){this.dd&&
this.dd.destroy();b.Plugin.Drop&&b.one(this.get("container")).all(this.get("nodes")).unplug(b.Plugin.Drop);b.Array.each(this._handles,function(c){c.detach()})}},{NAME:"delegate",ATTRS:{container:{value:"body"},nodes:{value:".dd-draggable"},invalid:{value:"input, select, button, a, textarea"},lastNode:{value:f},currentNode:{value:f},dragNode:{value:f},over:{value:!1},target:{value:!1},dragConfig:{value:null},handles:{value:null}}});b.mix(b.DD.DDM,{_delegates:[],regDelegate:function(c){this._delegates.push(c)},
getDelegate:function(c){var a=null;c=b.one(c);b.Array.each(this._delegates,function(b){c.test(b.get("container"))&&(a=b)},this);return a}});b.namespace("DD");b.DD.Delegate=a},"3.17.2",{requires:["dd-drag","dd-drop-plugin","event-mouseenter"]})},804:function(p,m,k){YUI.add("dd-drag",function(b,d){var a=b.DD.DDM,f=function(c){this._lazyAddAttrs=!1;f.superclass.constructor.apply(this,arguments);a._regDrag(this)||b.error("Failed to register node, already in use: "+c.node)};f.NAME="drag";f.START_EVENT=
"mousedown";f.ATTRS={node:{setter:function(a){if(this._canDrag(a))return a;var e=b.one(a);e||b.error("DD.Drag: Invalid Node Given: "+a);return e}},dragNode:{setter:function(a){if(this._canDrag(a))return a;var e=b.one(a);e||b.error("DD.Drag: Invalid dragNode Given: "+a);return e}},offsetNode:{value:!0},startCentered:{value:!1},clickPixelThresh:{value:a.get("clickPixelThresh")},clickTimeThresh:{value:a.get("clickTimeThresh")},lock:{value:!1,setter:function(c){c?this.get("node").addClass(a.CSS_PREFIX+
"-locked"):this.get("node").removeClass(a.CSS_PREFIX+"-locked");return c}},data:{value:!1},move:{value:!0},useShim:{value:!0},activeHandle:{value:!1},primaryButtonOnly:{value:!0},dragging:{value:!1},parent:{value:!1},target:{value:!1,setter:function(a){this._handleTarget(a);return a}},dragMode:{value:null,setter:function(c){return a._setDragMode(c)}},groups:{value:["default"],getter:function(){return!this._groups?(this._groups={},[]):b.Object.keys(this._groups)},setter:function(a){this._groups=b.Array.hash(a);
return a}},handles:{value:null,setter:function(a){a?(this._handles={},b.Array.each(a,function(a){var c=a;if(a instanceof b.Node||a instanceof b.NodeList)c=a._yuid;this._handles[c]=a},this)):this._handles=null;return a}},bubbles:{setter:function(a){this.addTarget(a);return a}},haltDown:{value:!0}};b.extend(f,b.Base,{_canDrag:function(a){return a&&a.setXY&&a.getXY&&a.test&&a.contains?!0:!1},_bubbleTargets:b.DD.DDM,addToGroup:function(c){this._groups[c]=!0;a._activateTargets();return this},removeFromGroup:function(c){delete this._groups[c];
a._activateTargets();return this},target:null,_handleTarget:function(c){b.DD.Drop&&(!1===c?this.target&&(a._unregTarget(this.target),this.target=null):(b.Lang.isObject(c)||(c={}),c.bubbleTargets=c.bubbleTargets||this.getTargets(),c.node=this.get("node"),c.groups=c.groups||this.get("groups"),this.target=new b.DD.Drop(c)))},_groups:null,_createEvents:function(){this.publish("drag:mouseDown",{defaultFn:this._defMouseDownFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"});this.publish("drag:align",
{defaultFn:this._defAlignFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"});this.publish("drag:drag",{defaultFn:this._defDragFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"});this.publish("drag:end",{defaultFn:this._defEndFn,preventedFn:this._prevEndFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"});b.Array.each("drag:afterMouseDown drag:removeHandle drag:addHandle drag:removeInvalid drag:addInvalid drag:start drag:drophit drag:dropmiss drag:over drag:enter drag:exit".split(" "),function(a){this.publish(a,
{type:a,emitFacade:!0,bubbles:!0,preventable:!1,queuable:!1,prefix:"drag"})},this)},_ev_md:null,_startTime:null,_endTime:null,_handles:null,_invalids:null,_invalidsDefault:{textarea:!0,input:!0,a:!0,button:!0,select:!0},_dragThreshMet:null,_fromTimeout:null,_clickTimeout:null,deltaXY:null,startXY:null,nodeXY:null,lastXY:null,actXY:null,realXY:null,mouseXY:null,region:null,_handleMouseUp:function(){this.fire("drag:mouseup");this._fixIEMouseUp();a.activeDrag&&a._end()},_fixDragStart:function(a){this.validClick(a)&&
a.preventDefault()},_ieSelectFix:function(){return!1},_ieSelectBack:null,_fixIEMouseDown:function(){b.UA.ie&&(this._ieSelectBack=b.config.doc.body.onselectstart,b.config.doc.body.onselectstart=this._ieSelectFix)},_fixIEMouseUp:function(){b.UA.ie&&(b.config.doc.body.onselectstart=this._ieSelectBack)},_handleMouseDownEvent:function(a){this.validClick(a)&&a.preventDefault();this.fire("drag:mouseDown",{ev:a})},_defMouseDownFn:function(c){c=c.ev;this._dragThreshMet=!1;this._ev_md=c;if(this.get("primaryButtonOnly")&&
1<c.button)return!1;this.validClick(c)&&(this._fixIEMouseDown(c),0!==f.START_EVENT.indexOf("gesture")&&(this.get("haltDown")?c.halt():c.preventDefault()),this._setStartPosition([c.pageX,c.pageY]),a.activeDrag=this,this._clickTimeout=b.later(this.get("clickTimeThresh"),this,this._timeoutCheck));this.fire("drag:afterMouseDown",{ev:c})},validClick:function(a){var e=!1,d=!1,h=a.target,f=null,l=d=null,n=!1;if(this._handles)b.Object.each(this._handles,function(a,c){a instanceof b.Node||a instanceof b.NodeList?
e||(l=a,l instanceof b.Node&&(l=new b.NodeList(a._node)),l.each(function(a){a.contains(h)&&(e=!0)})):b.Lang.isString(c)&&(h.test(c+", "+c+" *")&&!f)&&(f=c,e=!0)});else if(d=this.get("node"),d.contains(h)||d.compareTo(h))e=!0;e&&this._invalids&&b.Object.each(this._invalids,function(a,c){b.Lang.isString(c)&&h.test(c+", "+c+" *")&&(e=!1)});e&&(f?(d=a.currentTarget.all(f),n=!1,d.each(function(a){if((a.contains(h)||a.compareTo(h))&&!n)n=!0,this.set("activeHandle",a)},this)):this.set("activeHandle",this.get("node")));
return e},_setStartPosition:function(a){this.startXY=a;this.nodeXY=this.lastXY=this.realXY=this.get("node").getXY();this.get("offsetNode")?this.deltaXY=[this.startXY[0]-this.nodeXY[0],this.startXY[1]-this.nodeXY[1]]:this.deltaXY=[0,0]},_timeoutCheck:function(){!this.get("lock")&&(!this._dragThreshMet&&this._ev_md)&&(this._fromTimeout=this._dragThreshMet=!0,this.start(),this._alignNode([this._ev_md.pageX,this._ev_md.pageY],!0))},removeHandle:function(a){var e=a;if(a instanceof b.Node||a instanceof
b.NodeList)e=a._yuid;this._handles[e]&&(delete this._handles[e],this.fire("drag:removeHandle",{handle:a}));return this},addHandle:function(a){this._handles||(this._handles={});var e=a;if(a instanceof b.Node||a instanceof b.NodeList)e=a._yuid;this._handles[e]=a;this.fire("drag:addHandle",{handle:a});return this},removeInvalid:function(a){this._invalids[a]&&(this._invalids[a]=null,delete this._invalids[a],this.fire("drag:removeInvalid",{handle:a}));return this},addInvalid:function(a){b.Lang.isString(a)&&
(this._invalids[a]=!0,this.fire("drag:addInvalid",{handle:a}));return this},initializer:function(){this.get("node").dd=this;if(!this.get("node").get("id")){var a=b.stamp(this.get("node"));this.get("node").set("id",a)}this.actXY=[];this._invalids=b.clone(this._invalidsDefault,!0);this._createEvents();this.get("dragNode")||this.set("dragNode",this.get("node"));this.on("initializedChange",b.bind(this._prep,this));this.set("groups",this.get("groups"))},_prep:function(){this._dragThreshMet=!1;var c=this.get("node");
c.addClass(a.CSS_PREFIX+"-draggable");c.on(f.START_EVENT,b.bind(this._handleMouseDownEvent,this));c.on("mouseup",b.bind(this._handleMouseUp,this));c.on("dragstart",b.bind(this._fixDragStart,this))},_unprep:function(){var c=this.get("node");c.removeClass(a.CSS_PREFIX+"-draggable");c.detachAll("mouseup");c.detachAll("dragstart");c.detachAll(f.START_EVENT);this.mouseXY=[];this.deltaXY=[0,0];this.startXY=[];this.nodeXY=[];this.lastXY=[];this.actXY=[];this.realXY=[]},start:function(){if(!this.get("lock")&&
!this.get("dragging")){var c=this.get("node"),b,d;this._startTime=(new Date).getTime();a._start();c.addClass(a.CSS_PREFIX+"-dragging");this.fire("drag:start",{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime});c=this.get("dragNode");d=this.nodeXY;b=c.get("offsetWidth");c=c.get("offsetHeight");this.get("startCentered")&&this._setStartPosition([d[0]+b/2,d[1]+c/2]);this.region={0:d[0],1:d[1],area:0,top:d[1],right:d[0]+b,bottom:d[1]+c,left:d[0]};this.set("dragging",!0)}return this},
end:function(){this._endTime=(new Date).getTime();this._clickTimeout&&this._clickTimeout.cancel();this._dragThreshMet=this._fromTimeout=!1;!this.get("lock")&&this.get("dragging")&&this.fire("drag:end",{pageX:this.lastXY[0],pageY:this.lastXY[1],startTime:this._startTime,endTime:this._endTime});this.get("node").removeClass(a.CSS_PREFIX+"-dragging");this.set("dragging",!1);this.deltaXY=[0,0];return this},_defEndFn:function(){this._fixIEMouseUp();this._ev_md=null},_prevEndFn:function(){this._fixIEMouseUp();
this.get("dragNode").setXY(this.nodeXY);this.region=this._ev_md=null},_align:function(a){this.fire("drag:align",{pageX:a[0],pageY:a[1]})},_defAlignFn:function(a){this.actXY=[a.pageX-this.deltaXY[0],a.pageY-this.deltaXY[1]]},_alignNode:function(a,b){this._align(a);b||this._moveNode()},_moveNode:function(a){var b=[],d=[],h=this.nodeXY,f=this.actXY;b[0]=f[0]-this.lastXY[0];b[1]=f[1]-this.lastXY[1];d[0]=f[0]-this.nodeXY[0];d[1]=f[1]-this.nodeXY[1];this.region={0:f[0],1:f[1],area:0,top:f[1],right:f[0]+
this.get("dragNode").get("offsetWidth"),bottom:f[1]+this.get("dragNode").get("offsetHeight"),left:f[0]};this.fire("drag:drag",{pageX:f[0],pageY:f[1],scroll:a,info:{start:h,xy:f,delta:b,offset:d}});this.lastXY=f},_defDragFn:function(a){if(this.get("move")){if(a.scroll&&a.scroll.node){var d=a.scroll.node.getDOMNode();d===b.config.win?d.scrollTo(a.scroll.left,a.scroll.top):(a.scroll.node.set("scrollTop",a.scroll.top),a.scroll.node.set("scrollLeft",a.scroll.left))}this.get("dragNode").setXY([a.pageX,
a.pageY]);this.realXY=[a.pageX,a.pageY]}},_move:function(a){if(this.get("lock"))return!1;this.mouseXY=[a.pageX,a.pageY];if(this._dragThreshMet)this._clickTimeout&&this._clickTimeout.cancel(),this._alignNode([a.pageX,a.pageY]);else{var b=Math.abs(this.startXY[0]-a.pageX),d=Math.abs(this.startXY[1]-a.pageY);if(b>this.get("clickPixelThresh")||d>this.get("clickPixelThresh"))this._dragThreshMet=!0,this.start(),a&&a.preventDefault&&a.preventDefault(),this._alignNode([a.pageX,a.pageY])}},stopDrag:function(){this.get("dragging")&&
a._end();return this},destructor:function(){this._unprep();this.target&&this.target.destroy();a._unregDrag(this)}});b.namespace("DD");b.DD.Drag=f},"3.17.2",{requires:["dd-ddm-base"]})},805:function(p,m,k){YUI.add("dd-drop-plugin",function(b,d){var a=function(b){b.node=b.host;a.superclass.constructor.apply(this,arguments)};a.NAME="dd-drop-plugin";a.NS="drop";b.extend(a,b.DD.Drop);b.namespace("Plugin");b.Plugin.Drop=a},"3.17.2",{requires:["dd-drop"]})},806:function(p,m,k){YUI.add("dd-drop",function(b,
d){var a=b.DD.DDM,f=function(){this._lazyAddAttrs=!1;f.superclass.constructor.apply(this,arguments);b.on("domready",b.bind(function(){b.later(100,this,this._createShim)},this));a._regTarget(this)};f.NAME="drop";f.ATTRS={node:{setter:function(a){var d=b.one(a);d||b.error("DD.Drop: Invalid Node Given: "+a);return d}},groups:{value:["default"],getter:function(){return!this._groups?(this._groups={},[]):b.Object.keys(this._groups)},setter:function(a){this._groups=b.Array.hash(a);return a}},padding:{value:"0",
setter:function(c){return a.cssSizestoObject(c)}},lock:{value:!1,setter:function(c){c?this.get("node").addClass(a.CSS_PREFIX+"-drop-locked"):this.get("node").removeClass(a.CSS_PREFIX+"-drop-locked");return c}},bubbles:{setter:function(a){this.addTarget(a);return a}},useShim:{value:!0,setter:function(a){b.DD.DDM._noShim=!a;return a}}};b.extend(f,b.Base,{_bubbleTargets:b.DD.DDM,addToGroup:function(a){this._groups[a]=!0;return this},removeFromGroup:function(a){delete this._groups[a];return this},_createEvents:function(){b.Array.each(["drop:over",
"drop:enter","drop:exit","drop:hit"],function(a){this.publish(a,{type:a,emitFacade:!0,preventable:!1,bubbles:!0,queuable:!1,prefix:"drop"})},this)},_valid:null,_groups:null,shim:null,region:null,overTarget:null,inGroup:function(a){var d=this._valid=!1;b.Array.each(a,function(a){this._groups[a]&&(this._valid=d=!0)},this);return d},initializer:function(){b.later(100,this,this._createEvents);var c=this.get("node"),d;c.get("id")||(d=b.stamp(c),c.set("id",d));c.addClass(a.CSS_PREFIX+"-drop");this.set("groups",
this.get("groups"))},destructor:function(){a._unregTarget(this);this.shim&&this.shim!==this.get("node")&&(this.shim.detachAll(),this.shim.remove(),this.shim=null);this.get("node").removeClass(a.CSS_PREFIX+"-drop");this.detachAll()},_deactivateShim:function(){if(!this.shim)return!1;this.get("node").removeClass(a.CSS_PREFIX+"-drop-active-valid");this.get("node").removeClass(a.CSS_PREFIX+"-drop-active-invalid");this.get("node").removeClass(a.CSS_PREFIX+"-drop-over");this.get("useShim")&&this.shim.setStyles({top:"-999px",
left:"-999px",zIndex:"1"});this.overTarget=!1},_activateShim:function(){if(!a.activeDrag||this.get("node")===a.activeDrag.get("node")||this.get("lock"))return!1;var c=this.get("node");this.inGroup(a.activeDrag.get("groups"))?(c.removeClass(a.CSS_PREFIX+"-drop-active-invalid"),c.addClass(a.CSS_PREFIX+"-drop-active-valid"),a._addValid(this),this.overTarget=!1,this.get("useShim")||(this.shim=this.get("node")),this.sizeShim()):(a._removeValid(this),c.removeClass(a.CSS_PREFIX+"-drop-active-valid"),c.addClass(a.CSS_PREFIX+
"-drop-active-invalid"))},sizeShim:function(){if(!a.activeDrag||this.get("node")===a.activeDrag.get("node")||this.get("lock"))return!1;if(!this.shim)return b.later(100,this,this.sizeShim),!1;var c=this.get("node"),d=c.get("offsetHeight"),g=c.get("offsetWidth"),c=c.getXY(),h=this.get("padding"),f,l,g=g+h.left+h.right,d=d+h.top+h.bottom;c[0]-=h.left;c[1]-=h.top;a.activeDrag.get("dragMode")===a.INTERSECT&&(h=a.activeDrag,f=h.get("node").get("offsetHeight"),l=h.get("node").get("offsetWidth"),d+=f,g+=
l,c[0]-=l-h.deltaXY[0],c[1]-=f-h.deltaXY[1]);this.get("useShim")&&this.shim.setStyles({height:d+"px",width:g+"px",top:c[1]+"px",left:c[0]+"px"});this.region={0:c[0],1:c[1],area:0,top:c[1],right:c[0]+g,bottom:c[1]+d,left:c[0]}},_createShim:function(){if(a._pg){if(!this.shim){var c=this.get("node");this.get("useShim")&&(c=b.Node.create('<div id="'+this.get("node").get("id")+'_shim"></div>'),c.setStyles({height:this.get("node").get("offsetHeight")+"px",width:this.get("node").get("offsetWidth")+"px",
backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"}),a._pg.appendChild(c),c.on("mouseover",b.bind(this._handleOverEvent,this)),c.on("mouseout",b.bind(this._handleOutEvent,this)));this.shim=c}}else b.later(10,this,this._createShim)},_handleTargetOver:function(){a.isOverTarget(this)?(this.get("node").addClass(a.CSS_PREFIX+"-drop-over"),a.activeDrop=this,a.otherDrops[this]=this,this.overTarget?(a.activeDrag.fire("drag:over",{drop:this,drag:a.activeDrag}),
this.fire("drop:over",{drop:this,drag:a.activeDrag})):a.activeDrag.get("dragging")&&(this.overTarget=!0,this.fire("drop:enter",{drop:this,drag:a.activeDrag}),a.activeDrag.fire("drag:enter",{drop:this,drag:a.activeDrag}),a.activeDrag.get("node").addClass(a.CSS_PREFIX+"-drag-over"))):this._handleOut()},_handleOverEvent:function(){this.shim.setStyle("zIndex","999");a._addActiveShim(this)},_handleOutEvent:function(){this.shim.setStyle("zIndex","1");a._removeActiveShim(this)},_handleOut:function(c){if((!a.isOverTarget(this)||
c)&&this.overTarget)this.overTarget=!1,c||a._removeActiveShim(this),a.activeDrag&&(this.get("node").removeClass(a.CSS_PREFIX+"-drop-over"),a.activeDrag.get("node").removeClass(a.CSS_PREFIX+"-drag-over"),this.fire("drop:exit",{drop:this,drag:a.activeDrag}),a.activeDrag.fire("drag:exit",{drop:this,drag:a.activeDrag}),delete a.otherDrops[this])}});b.DD.Drop=f},"3.17.2",{requires:["dd-drag","dd-ddm-drop"]})},807:function(p,m,k){YUI.add("dd-proxy",function(b,d){var a=b.DD.DDM,f=function(){f.superclass.constructor.apply(this,
arguments)};f.NAME="DDProxy";f.NS="proxy";f.ATTRS={host:{},moveOnEnd:{value:!0},hideOnEnd:{value:!0},resizeFrame:{value:!0},positionProxy:{value:!0},borderStyle:{value:"1px solid #808080"},cloneNode:{value:!1}};b.namespace("Plugin");b.extend(f,b.Base,{_hands:null,_init:function(){if(a._proxy){this._hands||(this._hands=[]);var c,d,g=this.get("host");g.get("dragNode").compareTo(g.get("node"))&&a._proxy&&g.set("dragNode",a._proxy);b.Array.each(this._hands,function(a){a.detach()});c=a.on("ddm:start",
b.bind(function(){a.activeDrag===g&&a._setFrame(g)},this));d=a.on("ddm:end",b.bind(function(){g.get("dragging")&&(this.get("moveOnEnd")&&g.get("node").setXY(g.lastXY),this.get("hideOnEnd")&&g.get("dragNode").setStyle("display","none"),this.get("cloneNode")&&(g.get("dragNode").remove(),g.set("dragNode",a._proxy)))},this));this._hands=[c,d]}else a._createFrame(),b.on("domready",b.bind(this._init,this))},initializer:function(){this._init()},destructor:function(){var a=this.get("host");b.Array.each(this._hands,
function(a){a.detach()});a.set("dragNode",a.get("node"))},clone:function(){var a=this.get("host"),d=a.get("node"),g=d.cloneNode(!0);g.all('input[type="radio"]').removeAttribute("name");delete g._yuid;g.setAttribute("id",b.guid());g.setStyle("position","absolute");d.get("parentNode").appendChild(g);a.set("dragNode",g);return g}});b.Plugin.DDProxy=f;b.mix(a,{_createFrame:function(){if(!a._proxy){a._proxy=!0;var c=b.Node.create("<div></div>"),d=b.one("body");c.setStyles({position:"absolute",display:"none",
zIndex:"999",top:"-999px",left:"-999px"});d.prepend(c);c.set("id",b.guid());c.addClass(a.CSS_PREFIX+"-proxy");a._proxy=c}},_setFrame:function(c){var b=c.get("node"),d=c.get("dragNode"),h,f="auto";(h=a.activeDrag.get("activeHandle"))&&(f=h.getStyle("cursor"));"auto"===f&&(f=a.get("dragCursor"));d.setStyles({visibility:"hidden",display:"block",cursor:f,border:c.proxy.get("borderStyle")});c.proxy.get("cloneNode")&&(d=c.proxy.clone());c.proxy.get("resizeFrame")&&d.setStyles({height:b.get("offsetHeight")+
"px",width:b.get("offsetWidth")+"px"});c.proxy.get("positionProxy")&&d.setXY(c.nodeXY);d.setStyle("visibility","visible")}})},"3.17.2",{requires:["dd-drag"]})},808:function(p,m,k){YUI.add("dd-scroll",function(b,d){var a=function(){a.superclass.constructor.apply(this,arguments)},f,c;a.ATTRS={parentScroll:{value:!1,setter:function(a){return a?a:!1}},buffer:{value:30,validator:b.Lang.isNumber},scrollDelay:{value:235,validator:b.Lang.isNumber},host:{value:null},windowScroll:{value:!1,validator:b.Lang.isBoolean},
vertical:{value:!0,validator:b.Lang.isBoolean},horizontal:{value:!0,validator:b.Lang.isBoolean}};b.extend(a,b.Base,{_scrolling:null,_vpRegionCache:null,_dimCache:null,_scrollTimer:null,_getVPRegion:function(){var a={},a=this.get("parentScroll"),c=this.get("buffer"),b=this.get("windowScroll"),d=b?[]:a.getXY(),f=b?"winWidth":"offsetWidth",n=b?"winHeight":"offsetHeight",k=b?a.get("scrollTop"):d[1],b=b?a.get("scrollLeft"):d[0];return this._vpRegionCache=a={top:k+c,right:a.get(f)+b-c,bottom:a.get(n)+k-
c,left:b+c}},initializer:function(){var a=this.get("host");a.after("drag:start",b.bind(this.start,this));a.after("drag:end",b.bind(this.end,this));a.on("drag:align",b.bind(this.align,this));b.one("win").on("scroll",b.bind(function(){this._vpRegionCache=null},this))},_checkWinScroll:function(a){var c=this._getVPRegion(),b=this.get("host"),d=this.get("windowScroll"),f=b.lastXY,n=!1,k=this.get("buffer"),p=this.get("parentScroll"),m=p.get("scrollTop"),w=p.get("scrollLeft"),z=f[1]+this._dimCache.h,x=f[1],
A=f[0]+this._dimCache.w,y=f[0],s=x,t=y,u=m,v=w;this.get("horizontal")&&(y<=c.left&&(n=!0,t=f[0]-(d?k:0),v=w-k),A>=c.right&&(n=!0,t=f[0]+(d?k:0),v=w+k));this.get("vertical")&&(z>=c.bottom&&(n=!0,s=f[1]+(d?k:0),u=m+k),x<=c.top&&(n=!0,s=f[1]-(d?k:0),u=m-k));0>u&&(u=0,s=f[1]);0>v&&(v=0,t=f[0]);0>s&&(s=f[1]);0>t&&(t=f[0]);a?(b.actXY=[t,s],b._alignNode([t,s],!0),b.actXY=[t,s],b._moveNode({node:p,top:u,left:v}),!u&&!v&&this._cancelScroll()):n?this._initScroll():this._cancelScroll()},_initScroll:function(){this._cancelScroll();
this._scrollTimer=b.Lang.later(this.get("scrollDelay"),this,this._checkWinScroll,[!0],!0)},_cancelScroll:function(){this._scrolling=!1;this._scrollTimer&&(this._scrollTimer.cancel(),delete this._scrollTimer)},align:function(a){this._scrolling&&(this._cancelScroll(),a.preventDefault());this._scrolling||this._checkWinScroll()},_setDimCache:function(){var a=this.get("host").get("dragNode");this._dimCache={h:a.get("offsetHeight"),w:a.get("offsetWidth")}},start:function(){this._setDimCache()},end:function(){this._dimCache=
null;this._cancelScroll()}});b.namespace("Plugin");f=function(){f.superclass.constructor.apply(this,arguments)};f.ATTRS=b.merge(a.ATTRS,{windowScroll:{value:!0,setter:function(a){a&&this.set("parentScroll",b.one("win"));return a}}});b.extend(f,a,{initializer:function(){this.set("windowScroll",this.get("windowScroll"))}});f.NAME=f.NS="winscroll";b.Plugin.DDWinScroll=f;c=function(){c.superclass.constructor.apply(this,arguments)};c.ATTRS=b.merge(a.ATTRS,{node:{value:!1,setter:function(a){var c=b.one(a);
c?this.set("parentScroll",c):!1!==a&&b.error("DDNodeScroll: Invalid Node Given: "+a);return c}}});b.extend(c,a,{initializer:function(){this.set("node",this.get("node"))}});c.NAME=c.NS="nodescroll";b.Plugin.DDNodeScroll=c;b.DD.Scroll=a},"3.17.2",{requires:["dd-drag"]})},810:function(p,m,k){YUI.add("node-focusmanager",function(b,d){var a={37:!0,38:!0,39:!0,40:!0},f={a:!0,button:!0,input:!0,object:!0},c=b.Lang,e=b.UA,g=function(){g.superclass.constructor.apply(this,arguments)};g.ATTRS={focused:{value:!1,
readOnly:!0},descendants:{getter:function(a){return this.get("host").all(a)}},activeDescendant:{setter:function(a){var d=c.isNumber,e=b.Attribute.INVALID_VALUE,g=this._descendantsMap,f=this._descendants,k;d(a)?a=k=a:a instanceof b.Node&&g?(k=g[a.get("id")],a=d(k)?k:e):a=e;f&&(f=f.item(k))&&f.get("disabled")&&(a=e);return a}},keys:{value:{next:null,previous:null}},focusClass:{},circular:{value:!0}};b.extend(g,b.Plugin.Base,{_stopped:!0,_descendants:null,_descendantsMap:null,_focusedNode:null,_lastNodeIndex:0,
_eventHandlers:null,_initDescendants:function(){var a=this.get("descendants"),d={},e=-1,g,f=this.get("activeDescendant"),k,p,m=0;c.isUndefined(f)&&(f=-1);if(a){g=a.size();for(m=0;m<g;m++)k=a.item(m),-1===e&&!k.get("disabled")&&(e=m),0>f&&0===parseInt(k.getAttribute("tabIndex",2),10)&&(f=m),k&&k.set("tabIndex",-1),p=k.get("id"),p||(p=b.guid(),k.set("id",p)),d[p]=m;0>f&&(f=0);k=a.item(f);if(!k||k.get("disabled"))k=a.item(e),f=e;this._lastNodeIndex=g-1;this._descendants=a;this._descendantsMap=d;this.set("activeDescendant",
f);k&&k.set("tabIndex",0)}},_isDescendant:function(a){return a.get("id")in this._descendantsMap},_removeFocusClass:function(){var a=this._focusedNode,b=this.get("focusClass"),d;b&&(d=c.isString(b)?b:b.className);a&&d&&a.removeClass(d)},_detachKeyHandler:function(){var a=this._prevKeyHandler,c=this._nextKeyHandler;a&&a.detach();c&&c.detach()},_preventScroll:function(c){a[c.keyCode]&&this._isDescendant(c.target)&&c.preventDefault()},_fireClick:function(a){var c=a.target,b=c.get("nodeName").toLowerCase();
13===a.keyCode&&(!f[b]||"a"===b&&!c.getAttribute("href"))&&c.simulate("click")},_attachKeyHandler:function(){this._detachKeyHandler();var a=this.get("keys.next"),c=this.get("keys.previous"),d=this.get("host"),g=this._eventHandlers;c&&(this._prevKeyHandler=b.on("key",b.bind(this._focusPrevious,this),d,c));a&&(this._nextKeyHandler=b.on("key",b.bind(this._focusNext,this),d,a));e.opera&&g.push(d.on("keypress",this._preventScroll,this));e.opera||g.push(d.on("keypress",this._fireClick,this))},_detachEventHandlers:function(){this._detachKeyHandler();
var a=this._eventHandlers;a&&(b.Array.each(a,function(a){a.detach()}),this._eventHandlers=null)},_attachEventHandlers:function(){var a=this._descendants,c,d;a&&a.size()&&(a=this._eventHandlers||[],c=this.get("host").get("ownerDocument"),0===a.length&&(a.push(c.on("focus",this._onDocFocus,this)),a.push(c.on("mousedown",this._onDocMouseDown,this)),a.push(this.after("keysChange",this._attachKeyHandler)),a.push(this.after("descendantsChange",this._initDescendants)),a.push(this.after("activeDescendantChange",
this._afterActiveDescendantChange)),d=this.after("focusedChange",b.bind(function(a){a.newVal&&(this._attachKeyHandler(),d.detach())},this)),a.push(d)),this._eventHandlers=a)},_onDocMouseDown:function(a){var c=this.get("host"),b=a.target,d=c.contains(b),g,f=function(a){var b=!1;a.compareTo(c)||(b=this._isDescendant(a)?a:f.call(this,a.get("parentNode")));return b};d&&((g=f.call(this,b))?b=g:!g&&this.get("focused")&&(this._set("focused",!1),this._onDocFocus(a)));if(d&&this._isDescendant(b))this.focus(b);
else if(e.webkit&&this.get("focused")&&(!d||d&&!this._isDescendant(b)))this._set("focused",!1),this._onDocFocus(a)},_onDocFocus:function(a){a=this._focusTarget||a.target;var c=this.get("focused"),b=this.get("focusClass"),d=this._focusedNode,e;this._focusTarget&&(this._focusTarget=null);this.get("host").contains(a)?(e=this._isDescendant(a),!c&&e?c=!0:c&&!e&&(c=!1)):c=!1;b&&(d&&(!d.compareTo(a)||!c)&&this._removeFocusClass(),e&&c&&(b.fn?(a=b.fn(a),a.addClass(b.className)):a.addClass(b),this._focusedNode=
a));this._set("focused",c)},_focusNext:function(a,c){var b=c||this.get("activeDescendant"),d;this._isDescendant(a.target)&&b<=this._lastNodeIndex&&(b+=1,b===this._lastNodeIndex+1&&this.get("circular")&&(b=0),(d=this._descendants.item(b))&&(d.get("disabled")?this._focusNext(a,b):this.focus(b)));this._preventScroll(a)},_focusPrevious:function(a,c){var b=c||this.get("activeDescendant"),d;this._isDescendant(a.target)&&0<=b&&(b-=1,-1===b&&this.get("circular")&&(b=this._lastNodeIndex),(d=this._descendants.item(b))&&
(d.get("disabled")?this._focusPrevious(a,b):this.focus(b)));this._preventScroll(a)},_afterActiveDescendantChange:function(a){var c=this._descendants.item(a.prevVal);c&&c.set("tabIndex",-1);(c=this._descendants.item(a.newVal))&&c.set("tabIndex",0)},initializer:function(a){this.start()},destructor:function(){this.stop();this.get("host").focusManager=null},focus:function(a){c.isUndefined(a)&&(a=this.get("activeDescendant"));this.set("activeDescendant",a,{src:"UI"});if(a=this._descendants.item(this.get("activeDescendant")))a.focus(),
e.opera&&"button"===a.get("nodeName").toLowerCase()&&(this._focusTarget=a)},blur:function(){var a;if(this.get("focused")){if(a=this._descendants.item(this.get("activeDescendant")))a.blur(),this._removeFocusClass();this._set("focused",!1,{src:"UI"})}},start:function(){this._stopped&&(this._initDescendants(),this._attachEventHandlers(),this._stopped=!1)},stop:function(){this._stopped||(this._detachEventHandlers(),this._focusedNode=this._descendants=null,this._lastNodeIndex=0,this._stopped=!0)},refresh:function(){this._initDescendants();
this._eventHandlers||this._attachEventHandlers()}});g.NAME="nodeFocusManager";g.NS="focusManager";b.namespace("Plugin");b.Plugin.NodeFocusManager=g},"3.17.2",{requires:"attribute node plugin node-event-simulate event-key event-focus".split(" ")})},812:function(p,m,k){YUI.add("widget-anim",function(b,d){function a(b){a.superclass.constructor.apply(this,arguments)}a.NS="anim";a.NAME="pluginWidgetAnim";a.ANIMATIONS={fadeIn:function(){var a=this.get("host"),c=a.get("boundingBox"),d=new b.Anim({node:c,
to:{opacity:1},duration:this.get("duration")});a.get("visible")||c.setStyle("opacity",0);d.on("destroy",function(){this.get("node").setStyle("opacity",b.UA.ie?1:"")});return d},fadeOut:function(){return new b.Anim({node:this.get("host").get("boundingBox"),to:{opacity:0},duration:this.get("duration")})}};a.ATTRS={duration:{value:0.2},animShow:{valueFn:a.ANIMATIONS.fadeIn},animHide:{valueFn:a.ANIMATIONS.fadeOut}};b.extend(a,b.Plugin.Base,{initializer:function(a){this._bindAnimShow();this._bindAnimHide();
this.after("animShowChange",this._bindAnimShow);this.after("animHideChange",this._bindAnimHide);this.beforeHostMethod("_uiSetVisible",this._uiAnimSetVisible)},destructor:function(){this.get("animShow").destroy();this.get("animHide").destroy()},_uiAnimSetVisible:function(a){if(this.get("host").get("rendered"))return a?(this.get("animHide").stop(),this.get("animShow").run()):(this.get("animShow").stop(),this.get("animHide").run()),new b.Do.Prevent},_uiSetVisible:function(a){var c=this.get("host"),b=
c.getClassName("hidden");c.get("boundingBox").toggleClass(b,!a)},_bindAnimShow:function(){this.get("animShow").on("start",b.bind(function(){this._uiSetVisible(!0)},this))},_bindAnimHide:function(){this.get("animHide").after("end",b.bind(function(){this._uiSetVisible(!1)},this))}});b.namespace("Plugin").WidgetAnim=a},"3.17.2",{requires:["anim-base","plugin","widget"]})},813:function(p,m,k){YUI.add("widget-child",function(b,d){function a(){b.after(this._syncUIChild,this,"syncUI");b.after(this._bindUIChild,
this,"bindUI")}var f=b.Lang;a.ATTRS={selected:{value:0,validator:f.isNumber},index:{readOnly:!0,getter:function(){var a=this.get("parent"),b=-1;a&&(b=a.indexOf(this));return b}},parent:{readOnly:!0},depth:{readOnly:!0,getter:function(){for(var a=this.get("parent"),b=this.get("root"),d=-1;a;){d+=1;if(a==b)break;a=a.get("parent")}return d}},root:{readOnly:!0,getter:function(){var a=function(d){var g=d.get("parent"),f=d.ROOT_TYPE,k=g;f&&(k=g&&b.instanceOf(g,f));return k?a(g):d};return a(this)}}};a.prototype=
{ROOT_TYPE:null,_getUIEventNode:function(){var a=this.get("root"),b;a&&(b=a.get("boundingBox"));return b},next:function(a){var b=this.get("parent"),d;b&&(d=b.item(this.get("index")+1));!d&&a&&(d=b.item(0));return d},previous:function(a){var b=this.get("parent"),d=this.get("index"),f;b&&0<d&&(f=b.item([d-1]));!f&&a&&(f=b.item(b.size()-1));return f},remove:function(a){var d,g;f.isNumber(a)?g=b.WidgetParent.prototype.remove.apply(this,arguments):(d=this.get("parent"))&&(g=d.remove(this.get("index")));
return g},isRoot:function(){return this==this.get("root")},ancestor:function(a){var b=this.get("root"),d;if(this.get("depth")>a)for(d=this.get("parent");d!=b&&d.get("depth")>a;)d=d.get("parent");return d},_uiSetChildSelected:function(a){var b=this.get("boundingBox"),d=this.getClassName("selected");0===a?b.removeClass(d):b.addClass(d)},_afterChildSelectedChange:function(a){this._uiSetChildSelected(a.newVal)},_syncUIChild:function(){this._uiSetChildSelected(this.get("selected"))},_bindUIChild:function(){this.after("selectedChange",
this._afterChildSelectedChange)}};b.WidgetChild=a},"3.17.2",{requires:["base-build","widget"]})},814:function(p,m,k){YUI.add("widget-parent",function(b,d){function a(a){this.publish("addChild",{defaultTargetOnly:!0,defaultFn:this._defAddChildFn});this.publish("removeChild",{defaultTargetOnly:!0,defaultFn:this._defRemoveChildFn});this._items=[];var d,g;a&&a.children&&(d=a.children,g=this.after("initializedChange",function(a){this._add(d);g.detach()}));b.after(this._renderChildren,this,"renderUI");
b.after(this._bindUIParent,this,"bindUI");this.after("selectionChange",this._afterSelectionChange);this.after("selectedChange",this._afterParentSelectedChange);this.after("activeDescendantChange",this._afterActiveDescendantChange);this._hDestroyChild=this.after("*:destroy",this._afterDestroyChild);this.after("*:focusedChange",this._updateActiveDescendant)}var f=b.Lang;a.ATTRS={defaultChildType:{setter:function(a){var d=b.Attribute.INVALID_VALUE;a=f.isString(a)?b[a]:a;f.isFunction(a)&&(d=a);return d}},
activeDescendant:{readOnly:!0},multiple:{value:!1,validator:f.isBoolean,writeOnce:!0,getter:function(a){var b=this.get("root");return b&&b!=this?b.get("multiple"):a}},selection:{readOnly:!0,setter:"_setSelection",getter:function(a){return f.isArray(a)?new b.ArrayList(a):a}},selected:{setter:function(a){var d=a;1===a&&!this.get("multiple")&&(d=b.Attribute.INVALID_VALUE);return d}}};a.prototype={destructor:function(){this._destroyChildren()},_afterDestroyChild:function(a){a=a.target;a.get("parent")==
this&&a.remove()},_afterSelectionChange:function(a){if(a.target==this&&a.src!=this){a=a.newVal;var d=0;a&&(d=2,b.instanceOf(a,b.ArrayList)&&a.size()===this.size()&&(d=1));this.set("selected",d,{src:this})}},_afterActiveDescendantChange:function(a){var b=this.get("parent");b&&b._set("activeDescendant",a.newVal)},_afterParentSelectedChange:function(a){var b=a.newVal;this==a.target&&(a.src!=this&&(0===b||1===b))&&this.each(function(a){a.set("selected",b,{src:this})},this)},_setSelection:function(a){var b=
null,d;this.get("multiple")&&!this.isEmpty()?(d=[],this.each(function(a){0<a.get("selected")&&d.push(a)}),0<d.length&&(b=d)):0<a.get("selected")&&(b=a);return b},_updateSelection:function(a){var b=a.target,d;b.get("parent")==this&&("_updateSelection"!=a.src&&(d=this.get("selection"),!this.get("multiple")&&(d&&0<a.newVal)&&d.set("selected",0,{src:"_updateSelection"}),this._set("selection",b)),a.src==this&&this._set("selection",b,{src:this}))},_updateActiveDescendant:function(a){this._set("activeDescendant",
!0===a.newVal?a.target:null)},_createChild:function(a){var d=this.get("defaultChildType"),g=a.childType||a.type,h,k,l;g&&(k=f.isString(g)?b[g]:g);f.isFunction(k)?l=k:d&&(l=d);l?h=new l(a):b.error("Could not create a child instance because its constructor is either undefined or invalid.");return h},_defAddChildFn:function(a){var d=a.child,g=a.index,h=this._items;d.get("parent")&&d.remove();f.isNumber(g)?h.splice(g,0,d):h.push(d);d._set("parent",this);d.addTarget(this);a.index=d.get("index");d.after("selectedChange",
b.bind(this._updateSelection,this))},_defRemoveChildFn:function(a){var b=a.child;a=a.index;var d=this._items;b.get("focused")&&b.blur();b.get("selected")&&b.set("selected",0);d.splice(a,1);b.removeTarget(this);b._oldParent=b.get("parent");b._set("parent",null)},_add:function(a,d){var g,h,k;f.isArray(a)?(g=[],b.each(a,function(a,b){(h=this._add(a,d+b))&&g.push(h)},this),0<g.length&&(k=g)):(h=b.instanceOf(a,b.Widget)?a:this._createChild(a))&&this.fire("addChild",{child:h,index:d})&&(k=h);return k},
add:function(){var a=this._add.apply(this,arguments),a=a?f.isArray(a)?a:[a]:[];return new b.ArrayList(a)},remove:function(a){var b=this._items[a],d;b&&this.fire("removeChild",{child:b,index:a})&&(d=b);return d},removeAll:function(){var a=[],d;b.each(this._items.concat(),function(){(d=this.remove(0))&&a.push(d)},this);return new b.ArrayList(a)},selectChild:function(a){this.item(a).set("selected",1)},selectAll:function(){this.set("selected",1)},deselectAll:function(){this.set("selected",0)},_uiAddChild:function(a,
b){a.render(b);var d=a.get("boundingBox"),f;(f=a.next(!1))&&f.get("rendered")?(f=f.get("boundingBox"),f.insert(d,"before")):(f=a.previous(!1))&&f.get("rendered")?(f=f.get("boundingBox"),f.insert(d,"after")):b.contains(d)||b.appendChild(d)},_uiRemoveChild:function(a){a.get("boundingBox").remove()},_afterAddChild:function(a){a=a.child;a.get("parent")==this&&this._uiAddChild(a,this._childrenContainer)},_afterRemoveChild:function(a){a=a.child;a._oldParent==this&&this._uiRemoveChild(a)},_bindUIParent:function(){this.after("addChild",
this._afterAddChild);this.after("removeChild",this._afterRemoveChild)},_renderChildren:function(){var a=this._childrenContainer||this.get("contentBox");this._childrenContainer=a;this.each(function(b){b.render(a)})},_destroyChildren:function(){this._hDestroyChild.detach();this.each(function(a){a.destroy()})}};b.augment(a,b.ArrayList);b.WidgetParent=a},"3.17.2",{requires:["arraylist","base-build","widget"]})}});
